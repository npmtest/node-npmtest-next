{"/home/travis/build/npmtest/node-npmtest-next/test.js":"/* istanbul instrument in package npmtest_next */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - pre-init\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        switch (local.modeJs) {\n        // re-init local from window.local\n        case 'browser':\n            local = local.global.utility2.objectSetDefault(\n                local.global.utility2_rollup || local.global.local,\n                local.global.utility2\n            );\n            break;\n        // re-init local from example.js\n        case 'node':\n            local = (local.global.utility2_rollup || require('utility2'))\n                .requireReadme();\n            break;\n        }\n        // export local\n        local.global.local = local;\n    }());\n\n\n\n    // run shared js-env code - function\n    (function () {\n        return;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // run browser js-env code - function\n    case 'browser':\n        break;\n\n\n\n    // run node js-env code - function\n    case 'node':\n        break;\n    }\n\n\n\n    // run shared js-env code - post-init\n    (function () {\n        return;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // run browser js-env code - post-init\n    case 'browser':\n        local.testCase_browser_nullCase = local.testCase_browser_nullCase || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test browsers's null-case handling-behavior-behavior\n         */\n            onError(null, options);\n        };\n\n        // run tests\n        local.nop(local.modeTest &&\n            document.querySelector('#testRunButton1') &&\n            document.querySelector('#testRunButton1').click());\n        break;\n\n\n\n    // run node js-env code - post-init\n    /* istanbul ignore next */\n    case 'node':\n        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildApidoc's default handling-behavior-behavior\n         */\n            options = { modulePathList: module.paths };\n            local.buildApidoc(options, onError);\n        };\n\n        local.testCase_buildApp_default = local.testCase_buildApp_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildApp's default handling-behavior-behavior\n         */\n            local.testCase_buildReadme_default(options, local.onErrorThrow);\n            local.testCase_buildLib_default(options, local.onErrorThrow);\n            local.testCase_buildTest_default(options, local.onErrorThrow);\n            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);\n            options = [];\n            local.buildApp(options, onError);\n        };\n\n        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||\n            function (options, onError) {\n            /*\n             * this function will test buildCustomOrg's default handling-behavior\n             */\n                options = {};\n                local.buildCustomOrg(options, onError);\n            };\n\n        local.testCase_buildLib_default = local.testCase_buildLib_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildLib's default handling-behavior\n         */\n            options = {};\n            local.buildLib(options, onError);\n        };\n\n        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildReadme's default handling-behavior-behavior\n         */\n            options = {};\n            local.buildReadme(options, onError);\n        };\n\n        local.testCase_buildTest_default = local.testCase_buildTest_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildTest's default handling-behavior\n         */\n            options = {};\n            local.buildTest(options, onError);\n        };\n\n        local.testCase_webpage_default = local.testCase_webpage_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test webpage's default handling-behavior\n         */\n            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };\n            local.browserTest(options, onError);\n        };\n\n        // run test-server\n        local.testRunServer(local);\n        break;\n    }\n}());\n","/home/travis/build/npmtest/node-npmtest-next/lib.npmtest_next.js":"/* istanbul instrument in package npmtest_next */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - pre-init\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        // init utility2_rollup\n        local = local.global.utility2_rollup || local;\n        // init lib\n        local.local = local.npmtest_next = local;\n        // init exports\n        if (local.modeJs === 'browser') {\n            local.global.utility2_npmtest_next = local;\n        } else {\n            module.exports = local;\n            module.exports.__dirname = __dirname;\n            module.exports.module = module;\n        }\n    }());\n}());\n","/home/travis/build/npmtest/node-npmtest-next/example.js":"/*\nexample.js\n\nquickstart example\n\ninstruction\n    1. save this script as example.js\n    2. run the shell command:\n        $ npm install npmtest-next && PORT=8081 node example.js\n    3. play with the browser-demo on http://127.0.0.1:8081\n*/\n\n\n\n/* istanbul instrument in package npmtest_next */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - pre-init\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        // init utility2_rollup\n        local = local.global.utility2_rollup || (local.modeJs === 'browser'\n            ? local.global.utility2_npmtest_next\n            : global.utility2_moduleExports);\n        // export local\n        local.global.local = local;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // post-init\n    // run browser js-env code - post-init\n    /* istanbul ignore next */\n    case 'browser':\n        local.testRunBrowser = function (event) {\n            if (!event || (event &&\n                    event.currentTarget &&\n                    event.currentTarget.className &&\n                    event.currentTarget.className.includes &&\n                    event.currentTarget.className.includes('onreset'))) {\n                // reset output\n                Array.from(\n                    document.querySelectorAll('body > .resettable')\n                ).forEach(function (element) {\n                    switch (element.tagName) {\n                    case 'INPUT':\n                    case 'TEXTAREA':\n                        element.value = '';\n                        break;\n                    default:\n                        element.textContent = '';\n                    }\n                });\n            }\n            switch (event && event.currentTarget && event.currentTarget.id) {\n            case 'testRunButton1':\n                // show tests\n                if (document.querySelector('#testReportDiv1').style.display === 'none') {\n                    document.querySelector('#testReportDiv1').style.display = 'block';\n                    document.querySelector('#testRunButton1').textContent =\n                        'hide internal test';\n                    local.modeTest = true;\n                    local.testRunDefault(local);\n                // hide tests\n                } else {\n                    document.querySelector('#testReportDiv1').style.display = 'none';\n                    document.querySelector('#testRunButton1').textContent = 'run internal test';\n                }\n                break;\n            // custom-case\n            default:\n                break;\n            }\n            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&\n                    event.currentTarget &&\n                    event.currentTarget.className &&\n                    event.currentTarget.className.includes &&\n                    event.currentTarget.className.includes('oneval')))) {\n                // try to eval input-code\n                try {\n                    /*jslint evil: true*/\n                    eval(document.querySelector('#inputTextareaEval1').value);\n                } catch (errorCaught) {\n                    console.error(errorCaught);\n                }\n            }\n        };\n        // log stderr and stdout to #outputTextareaStdout1\n        ['error', 'log'].forEach(function (key) {\n            console[key + '_original'] = console[key];\n            console[key] = function () {\n                var element;\n                console[key + '_original'].apply(console, arguments);\n                element = document.querySelector('#outputTextareaStdout1');\n                if (!element) {\n                    return;\n                }\n                // append text to #outputTextareaStdout1\n                element.value += Array.from(arguments).map(function (arg) {\n                    return typeof arg === 'string'\n                        ? arg\n                        : JSON.stringify(arg, null, 4);\n                }).join(' ') + '\\n';\n                // scroll textarea to bottom\n                element.scrollTop = element.scrollHeight;\n            };\n        });\n        // init event-handling\n        ['change', 'click', 'keyup'].forEach(function (event) {\n            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {\n                element.addEventListener(event, local.testRunBrowser);\n            });\n        });\n        // run tests\n        local.testRunBrowser();\n        break;\n\n\n\n    // run node js-env code - post-init\n    /* istanbul ignore next */\n    case 'node':\n        // export local\n        module.exports = local;\n        // require modules\n        local.fs = require('fs');\n        local.http = require('http');\n        local.url = require('url');\n        // init assets\n        local.assetsDict = local.assetsDict || {};\n        /* jslint-ignore-begin */\n        local.assetsDict['/assets.index.template.html'] = '\\\n<!doctype html>\\n\\\n<html lang=\"en\">\\n\\\n<head>\\n\\\n<meta charset=\"UTF-8\">\\n\\\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\\n<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\\n<style>\\n\\\n/*csslint\\n\\\n    box-sizing: false,\\n\\\n    universal-selector: false\\n\\\n*/\\n\\\n* {\\n\\\n    box-sizing: border-box;\\n\\\n}\\n\\\nbody {\\n\\\n    background: #dde;\\n\\\n    font-family: Arial, Helvetica, sans-serif;\\n\\\n    margin: 2rem;\\n\\\n}\\n\\\nbody > * {\\n\\\n    margin-bottom: 1rem;\\n\\\n}\\n\\\n.utility2FooterDiv {\\n\\\n    margin-top: 20px;\\n\\\n    text-align: center;\\n\\\n}\\n\\\n</style>\\n\\\n<style>\\n\\\n/*csslint\\n\\\n*/\\n\\\ntextarea {\\n\\\n    font-family: monospace;\\n\\\n    height: 10rem;\\n\\\n    width: 100%;\\n\\\n}\\n\\\ntextarea[readonly] {\\n\\\n    background: #ddd;\\n\\\n}\\n\\\n</style>\\n\\\n</head>\\n\\\n<body>\\n\\\n<!-- utility2-comment\\n\\\n<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\\nutility2-comment -->\\n\\\n<h1>\\n\\\n<!-- utility2-comment\\n\\\n    <a\\n\\\n        {{#if env.npm_package_homepage}}\\n\\\n        href=\"{{env.npm_package_homepage}}\"\\n\\\n        {{/if env.npm_package_homepage}}\\n\\\n        target=\"_blank\"\\n\\\n    >\\n\\\nutility2-comment -->\\n\\\n        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\\n<!-- utility2-comment\\n\\\n    </a>\\n\\\nutility2-comment -->\\n\\\n</h1>\\n\\\n<h3>{{env.npm_package_description}}</h3>\\n\\\n<!-- utility2-comment\\n\\\n<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\\n<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\\n<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\\nutility2-comment -->\\n\\\n\\n\\\n\\n\\\n\\n\\\n<label>stderr and stdout</label>\\n\\\n<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\\n<!-- utility2-comment\\n\\\n{{#if isRollup}}\\n\\\n<script src=\"assets.app.js\"></script>\\n\\\n{{#unless isRollup}}\\n\\\nutility2-comment -->\\n\\\n<script src=\"assets.utility2.rollup.js\"></script>\\n\\\n<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\\n<script src=\"assets.npmtest_next.rollup.js\"></script>\\n\\\n<script src=\"assets.example.js\"></script>\\n\\\n<script src=\"assets.test.js\"></script>\\n\\\n<!-- utility2-comment\\n\\\n{{/if isRollup}}\\n\\\nutility2-comment -->\\n\\\n<div class=\"utility2FooterDiv\">\\n\\\n    [ this app was created with\\n\\\n    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\\n    ]\\n\\\n</div>\\n\\\n</body>\\n\\\n</html>\\n\\\n';\n        /* jslint-ignore-end */\n        if (local.templateRender) {\n            local.assetsDict['/'] = local.templateRender(\n                local.assetsDict['/assets.index.template.html'],\n                {\n                    env: local.objectSetDefault(local.env, {\n                        npm_package_description: 'the greatest app in the world!',\n                        npm_package_name: 'my-app',\n                        npm_package_nameAlias: 'my_app',\n                        npm_package_version: '0.0.1'\n                    })\n                }\n            );\n        } else {\n            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']\n                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {\n                    // jslint-hack\n                    String(match0);\n                    switch (match1) {\n                    case 'npm_package_description':\n                        return 'the greatest app in the world!';\n                    case 'npm_package_name':\n                        return 'my-app';\n                    case 'npm_package_nameAlias':\n                        return 'my_app';\n                    case 'npm_package_version':\n                        return '0.0.1';\n                    }\n                });\n        }\n        // run the cli\n        if (local.global.utility2_rollup || module !== require.main) {\n            break;\n        }\n        local.assetsDict['/assets.example.js'] =\n            local.assetsDict['/assets.example.js'] ||\n            local.fs.readFileSync(__filename, 'utf8');\n        // bug-workaround - long $npm_package_buildCustomOrg\n        /* jslint-ignore-begin */\n        local.assetsDict['/assets.npmtest_next.rollup.js'] =\n            local.assetsDict['/assets.npmtest_next.rollup.js'] ||\n            local.fs.readFileSync(\n                local.npmtest_next.__dirname + '/lib.npmtest_next.js',\n                'utf8'\n            ).replace((/^#!/), '//');\n        /* jslint-ignore-end */\n        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';\n        // if $npm_config_timeout_exit exists,\n        // then exit this process after $npm_config_timeout_exit ms\n        if (Number(process.env.npm_config_timeout_exit)) {\n            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));\n        }\n        // start server\n        if (local.global.utility2_serverHttp1) {\n            break;\n        }\n        process.env.PORT = process.env.PORT || '8081';\n        console.error('server starting on port ' + process.env.PORT);\n        local.http.createServer(function (request, response) {\n            request.urlParsed = local.url.parse(request.url);\n            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {\n                response.end(local.assetsDict[request.urlParsed.pathname]);\n                return;\n            }\n            response.statusCode = 404;\n            response.end();\n        }).listen(process.env.PORT);\n        break;\n    }\n}());\n","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/dist/server/next.js":"'use strict';\n\nvar _ = require('./');\n\nvar _2 = _interopRequireDefault(_);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = function (opts) {\n  return new _2.default(opts);\n};","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/dist/server/index.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _keys = require('babel-runtime/core-js/object/keys');\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _getIterator2 = require('babel-runtime/core-js/get-iterator');\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _toConsumableArray2 = require('babel-runtime/helpers/toConsumableArray');\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _stringify = require('babel-runtime/core-js/json/stringify');\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _path = require('path');\n\nvar _url = require('url');\n\nvar _querystring = require('querystring');\n\nvar _fs = require('fs');\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar _http = require('http');\n\nvar _http2 = _interopRequireDefault(_http);\n\nvar _render = require('./render');\n\nvar _router = require('./router');\n\nvar _router2 = _interopRequireDefault(_router);\n\nvar _hotReloader = require('./hot-reloader');\n\nvar _hotReloader2 = _interopRequireDefault(_hotReloader);\n\nvar _resolve = require('./resolve');\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _package = require('../../package');\n\nvar _package2 = _interopRequireDefault(_package);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar internalPrefixes = [/^\\/_next\\//, /^\\/static\\//];\n// We need to go up one more level since we are in the `dist` directory\n\nvar Server = function () {\n  function Server() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$dir = _ref.dir,\n        dir = _ref$dir === undefined ? '.' : _ref$dir,\n        _ref$dev = _ref.dev,\n        dev = _ref$dev === undefined ? false : _ref$dev,\n        _ref$staticMarkup = _ref.staticMarkup,\n        staticMarkup = _ref$staticMarkup === undefined ? false : _ref$staticMarkup,\n        _ref$quiet = _ref.quiet,\n        quiet = _ref$quiet === undefined ? false : _ref$quiet;\n\n    (0, _classCallCheck3.default)(this, Server);\n\n    this.dir = (0, _path.resolve)(dir);\n    this.dev = dev;\n    this.quiet = quiet;\n    this.router = new _router2.default();\n    this.hotReloader = dev ? new _hotReloader2.default(this.dir, { quiet: quiet }) : null;\n    this.http = null;\n    this.config = (0, _config2.default)(this.dir);\n    this.dist = this.config.distDir;\n    this.buildStats = !dev ? require((0, _path.join)(this.dir, this.dist, 'build-stats.json')) : null;\n    this.buildId = !dev ? this.readBuildId() : '-';\n    this.renderOpts = {\n      dev: dev,\n      staticMarkup: staticMarkup,\n      dir: this.dir,\n      hotReloader: this.hotReloader,\n      buildStats: this.buildStats,\n      buildId: this.buildId\n    };\n\n    this.defineRoutes();\n  }\n\n  (0, _createClass3.default)(Server, [{\n    key: 'handleRequest',\n    value: function handleRequest(req, res, parsedUrl) {\n      var _this = this;\n\n      // Parse url if parsedUrl not provided\n      if (!parsedUrl) {\n        parsedUrl = (0, _url.parse)(req.url, true);\n      }\n\n      // Parse the querystring ourselves if the user doesn't handle querystring parsing\n      if (typeof parsedUrl.query === 'string') {\n        parsedUrl.query = (0, _querystring.parse)(parsedUrl.query);\n      }\n\n      return this.run(req, res, parsedUrl).catch(function (err) {\n        if (!_this.quiet) console.error(err);\n        res.statusCode = 500;\n        res.end(_http.STATUS_CODES[500]);\n      });\n    }\n  }, {\n    key: 'getRequestHandler',\n    value: function getRequestHandler() {\n      return this.handleRequest.bind(this);\n    }\n  }, {\n    key: 'prepare',\n    value: function () {\n      var _ref2 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee() {\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this.hotReloader) {\n                  _context.next = 3;\n                  break;\n                }\n\n                _context.next = 3;\n                return this.hotReloader.start();\n\n              case 3:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function prepare() {\n        return _ref2.apply(this, arguments);\n      }\n\n      return prepare;\n    }()\n  }, {\n    key: 'close',\n    value: function () {\n      var _ref3 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2() {\n        var _this2 = this;\n\n        return _regenerator2.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!this.hotReloader) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                _context2.next = 3;\n                return this.hotReloader.stop();\n\n              case 3:\n                if (!this.http) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                _context2.next = 6;\n                return new _promise2.default(function (resolve, reject) {\n                  _this2.http.close(function (err) {\n                    if (err) return reject(err);\n                    return resolve();\n                  });\n                });\n\n              case 6:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function close() {\n        return _ref3.apply(this, arguments);\n      }\n\n      return close;\n    }()\n  }, {\n    key: 'defineRoutes',\n    value: function defineRoutes() {\n      var _this3 = this;\n\n      var routes = {\n        '/_next-prefetcher.js': function () {\n          var _ref4 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3(req, res, params) {\n            var p;\n            return _regenerator2.default.wrap(function _callee3$(_context3) {\n              while (1) {\n                switch (_context3.prev = _context3.next) {\n                  case 0:\n                    p = (0, _path.join)(__dirname, '../client/next-prefetcher-bundle.js');\n                    _context3.next = 3;\n                    return _this3.serveStatic(req, res, p);\n\n                  case 3:\n                  case 'end':\n                    return _context3.stop();\n                }\n              }\n            }, _callee3, _this3);\n          }));\n\n          return function _nextPrefetcherJs(_x2, _x3, _x4) {\n            return _ref4.apply(this, arguments);\n          };\n        }(),\n\n        '/_next/:hash/manifest.js': function () {\n          var _ref5 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee4(req, res, params) {\n            var p;\n            return _regenerator2.default.wrap(function _callee4$(_context4) {\n              while (1) {\n                switch (_context4.prev = _context4.next) {\n                  case 0:\n                    _this3.handleBuildHash('manifest.js', params.hash, res);\n                    p = (0, _path.join)(_this3.dir, _this3.dist + '/manifest.js');\n                    _context4.next = 4;\n                    return _this3.serveStatic(req, res, p);\n\n                  case 4:\n                  case 'end':\n                    return _context4.stop();\n                }\n              }\n            }, _callee4, _this3);\n          }));\n\n          return function _nextHashManifestJs(_x5, _x6, _x7) {\n            return _ref5.apply(this, arguments);\n          };\n        }(),\n\n        '/_next/:hash/main.js': function () {\n          var _ref6 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee5(req, res, params) {\n            var p;\n            return _regenerator2.default.wrap(function _callee5$(_context5) {\n              while (1) {\n                switch (_context5.prev = _context5.next) {\n                  case 0:\n                    _this3.handleBuildHash('main.js', params.hash, res);\n                    p = (0, _path.join)(_this3.dir, _this3.dist + '/main.js');\n                    _context5.next = 4;\n                    return _this3.serveStatic(req, res, p);\n\n                  case 4:\n                  case 'end':\n                    return _context5.stop();\n                }\n              }\n            }, _callee5, _this3);\n          }));\n\n          return function _nextHashMainJs(_x8, _x9, _x10) {\n            return _ref6.apply(this, arguments);\n          };\n        }(),\n\n        '/_next/:hash/commons.js': function () {\n          var _ref7 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee6(req, res, params) {\n            var p;\n            return _regenerator2.default.wrap(function _callee6$(_context6) {\n              while (1) {\n                switch (_context6.prev = _context6.next) {\n                  case 0:\n                    _this3.handleBuildHash('commons.js', params.hash, res);\n                    p = (0, _path.join)(_this3.dir, _this3.dist + '/commons.js');\n                    _context6.next = 4;\n                    return _this3.serveStatic(req, res, p);\n\n                  case 4:\n                  case 'end':\n                    return _context6.stop();\n                }\n              }\n            }, _callee6, _this3);\n          }));\n\n          return function _nextHashCommonsJs(_x11, _x12, _x13) {\n            return _ref7.apply(this, arguments);\n          };\n        }(),\n\n        '/_next/:hash/app.js': function () {\n          var _ref8 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee7(req, res, params) {\n            var p;\n            return _regenerator2.default.wrap(function _callee7$(_context7) {\n              while (1) {\n                switch (_context7.prev = _context7.next) {\n                  case 0:\n                    _this3.handleBuildHash('app.js', params.hash, res);\n                    p = (0, _path.join)(_this3.dir, _this3.dist + '/app.js');\n                    _context7.next = 4;\n                    return _this3.serveStatic(req, res, p);\n\n                  case 4:\n                  case 'end':\n                    return _context7.stop();\n                }\n              }\n            }, _callee7, _this3);\n          }));\n\n          return function _nextHashAppJs(_x14, _x15, _x16) {\n            return _ref8.apply(this, arguments);\n          };\n        }(),\n\n        '/_next/:buildId/pages/:path*': function () {\n          var _ref9 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee8(req, res, params) {\n            var paths, pathname;\n            return _regenerator2.default.wrap(function _callee8$(_context8) {\n              while (1) {\n                switch (_context8.prev = _context8.next) {\n                  case 0:\n                    if (_this3.handleBuildId(params.buildId, res)) {\n                      _context8.next = 4;\n                      break;\n                    }\n\n                    res.setHeader('Content-Type', 'application/json');\n                    res.end((0, _stringify2.default)({ buildIdMismatch: true }));\n                    return _context8.abrupt('return');\n\n                  case 4:\n                    paths = params.path || ['index'];\n                    pathname = '/' + paths.join('/');\n                    _context8.next = 8;\n                    return _this3.renderJSON(req, res, pathname);\n\n                  case 8:\n                  case 'end':\n                    return _context8.stop();\n                }\n              }\n            }, _callee8, _this3);\n          }));\n\n          return function _nextBuildIdPagesPath(_x17, _x18, _x19) {\n            return _ref9.apply(this, arguments);\n          };\n        }(),\n\n        '/_next/:path+': function () {\n          var _ref10 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee9(req, res, params) {\n            var p;\n            return _regenerator2.default.wrap(function _callee9$(_context9) {\n              while (1) {\n                switch (_context9.prev = _context9.next) {\n                  case 0:\n                    p = _path.join.apply(undefined, [__dirname, '..', 'client'].concat((0, _toConsumableArray3.default)(params.path || [])));\n                    _context9.next = 3;\n                    return _this3.serveStatic(req, res, p);\n\n                  case 3:\n                  case 'end':\n                    return _context9.stop();\n                }\n              }\n            }, _callee9, _this3);\n          }));\n\n          return function _nextPath(_x20, _x21, _x22) {\n            return _ref10.apply(this, arguments);\n          };\n        }(),\n\n        '/static/:path+': function () {\n          var _ref11 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee10(req, res, params) {\n            var p;\n            return _regenerator2.default.wrap(function _callee10$(_context10) {\n              while (1) {\n                switch (_context10.prev = _context10.next) {\n                  case 0:\n                    p = _path.join.apply(undefined, [_this3.dir, 'static'].concat((0, _toConsumableArray3.default)(params.path || [])));\n                    _context10.next = 3;\n                    return _this3.serveStatic(req, res, p);\n\n                  case 3:\n                  case 'end':\n                    return _context10.stop();\n                }\n              }\n            }, _callee10, _this3);\n          }));\n\n          return function staticPath(_x23, _x24, _x25) {\n            return _ref11.apply(this, arguments);\n          };\n        }(),\n\n        '/:path*': function () {\n          var _ref12 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee11(req, res, params, parsedUrl) {\n            var pathname, query;\n            return _regenerator2.default.wrap(function _callee11$(_context11) {\n              while (1) {\n                switch (_context11.prev = _context11.next) {\n                  case 0:\n                    pathname = parsedUrl.pathname, query = parsedUrl.query;\n                    _context11.next = 3;\n                    return _this3.render(req, res, pathname, query);\n\n                  case 3:\n                  case 'end':\n                    return _context11.stop();\n                }\n              }\n            }, _callee11, _this3);\n          }));\n\n          return function path(_x26, _x27, _x28, _x29) {\n            return _ref12.apply(this, arguments);\n          };\n        }()\n      };\n\n      var _arr = ['GET', 'HEAD'];\n      for (var _i = 0; _i < _arr.length; _i++) {\n        var method = _arr[_i];var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = (0, _getIterator3.default)((0, _keys2.default)(routes)), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var p = _step.value;\n\n            this.router.add(method, p, routes[p]);\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: 'start',\n    value: function () {\n      var _ref13 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee12(port, hostname) {\n        var _this4 = this;\n\n        return _regenerator2.default.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                _context12.next = 2;\n                return this.prepare();\n\n              case 2:\n                this.http = _http2.default.createServer(this.getRequestHandler());\n                _context12.next = 5;\n                return new _promise2.default(function (resolve, reject) {\n                  // This code catches EADDRINUSE error if the port is already in use\n                  _this4.http.on('error', reject);\n                  _this4.http.on('listening', function () {\n                    return resolve();\n                  });\n                  _this4.http.listen(port, hostname);\n                });\n\n              case 5:\n              case 'end':\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function start(_x30, _x31) {\n        return _ref13.apply(this, arguments);\n      }\n\n      return start;\n    }()\n  }, {\n    key: 'run',\n    value: function () {\n      var _ref14 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee13(req, res, parsedUrl) {\n        var fn;\n        return _regenerator2.default.wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                if (!this.hotReloader) {\n                  _context13.next = 3;\n                  break;\n                }\n\n                _context13.next = 3;\n                return this.hotReloader.run(req, res);\n\n              case 3:\n                fn = this.router.match(req, res, parsedUrl);\n\n                if (!fn) {\n                  _context13.next = 8;\n                  break;\n                }\n\n                _context13.next = 7;\n                return fn();\n\n              case 7:\n                return _context13.abrupt('return');\n\n              case 8:\n                if (!(req.method === 'GET' || req.method === 'HEAD')) {\n                  _context13.next = 13;\n                  break;\n                }\n\n                _context13.next = 11;\n                return this.render404(req, res, parsedUrl);\n\n              case 11:\n                _context13.next = 15;\n                break;\n\n              case 13:\n                res.statusCode = 501;\n                res.end(_http.STATUS_CODES[501]);\n\n              case 15:\n              case 'end':\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this);\n      }));\n\n      function run(_x32, _x33, _x34) {\n        return _ref14.apply(this, arguments);\n      }\n\n      return run;\n    }()\n  }, {\n    key: 'render',\n    value: function () {\n      var _ref15 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee14(req, res, pathname, query, parsedUrl) {\n        var html;\n        return _regenerator2.default.wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                if (!this.isInternalUrl(req)) {\n                  _context14.next = 2;\n                  break;\n                }\n\n                return _context14.abrupt('return', this.handleRequest(req, res, parsedUrl));\n\n              case 2:\n\n                if (this.config.poweredByHeader) {\n                  res.setHeader('X-Powered-By', 'Next.js ' + _package2.default.version);\n                }\n                _context14.next = 5;\n                return this.renderToHTML(req, res, pathname, query);\n\n              case 5:\n                html = _context14.sent;\n                return _context14.abrupt('return', (0, _render.sendHTML)(res, html, req.method));\n\n              case 7:\n              case 'end':\n                return _context14.stop();\n            }\n          }\n        }, _callee14, this);\n      }));\n\n      function render(_x35, _x36, _x37, _x38, _x39) {\n        return _ref15.apply(this, arguments);\n      }\n\n      return render;\n    }()\n  }, {\n    key: 'renderToHTML',\n    value: function () {\n      var _ref16 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee15(req, res, pathname, query) {\n        var compilationErr;\n        return _regenerator2.default.wrap(function _callee15$(_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                if (!this.dev) {\n                  _context15.next = 5;\n                  break;\n                }\n\n                compilationErr = this.getCompilationError(pathname);\n\n                if (!compilationErr) {\n                  _context15.next = 5;\n                  break;\n                }\n\n                res.statusCode = 500;\n                return _context15.abrupt('return', this.renderErrorToHTML(compilationErr, req, res, pathname, query));\n\n              case 5:\n                _context15.prev = 5;\n                _context15.next = 8;\n                return (0, _render.renderToHTML)(req, res, pathname, query, this.renderOpts);\n\n              case 8:\n                return _context15.abrupt('return', _context15.sent);\n\n              case 11:\n                _context15.prev = 11;\n                _context15.t0 = _context15['catch'](5);\n\n                if (!(_context15.t0.code === 'ENOENT')) {\n                  _context15.next = 18;\n                  break;\n                }\n\n                res.statusCode = 404;\n                return _context15.abrupt('return', this.renderErrorToHTML(null, req, res, pathname, query));\n\n              case 18:\n                if (!this.quiet) console.error(_context15.t0);\n                res.statusCode = 500;\n                return _context15.abrupt('return', this.renderErrorToHTML(_context15.t0, req, res, pathname, query));\n\n              case 21:\n              case 'end':\n                return _context15.stop();\n            }\n          }\n        }, _callee15, this, [[5, 11]]);\n      }));\n\n      function renderToHTML(_x40, _x41, _x42, _x43) {\n        return _ref16.apply(this, arguments);\n      }\n\n      return renderToHTML;\n    }()\n  }, {\n    key: 'renderError',\n    value: function () {\n      var _ref17 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee16(err, req, res, pathname, query) {\n        var html;\n        return _regenerator2.default.wrap(function _callee16$(_context16) {\n          while (1) {\n            switch (_context16.prev = _context16.next) {\n              case 0:\n                _context16.next = 2;\n                return this.renderErrorToHTML(err, req, res, pathname, query);\n\n              case 2:\n                html = _context16.sent;\n                return _context16.abrupt('return', (0, _render.sendHTML)(res, html, req.method));\n\n              case 4:\n              case 'end':\n                return _context16.stop();\n            }\n          }\n        }, _callee16, this);\n      }));\n\n      function renderError(_x44, _x45, _x46, _x47, _x48) {\n        return _ref17.apply(this, arguments);\n      }\n\n      return renderError;\n    }()\n  }, {\n    key: 'renderErrorToHTML',\n    value: function () {\n      var _ref18 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee17(err, req, res, pathname, query) {\n        var compilationErr;\n        return _regenerator2.default.wrap(function _callee17$(_context17) {\n          while (1) {\n            switch (_context17.prev = _context17.next) {\n              case 0:\n                if (!this.dev) {\n                  _context17.next = 5;\n                  break;\n                }\n\n                compilationErr = this.getCompilationError('/_error');\n\n                if (!compilationErr) {\n                  _context17.next = 5;\n                  break;\n                }\n\n                res.statusCode = 500;\n                return _context17.abrupt('return', (0, _render.renderErrorToHTML)(compilationErr, req, res, pathname, query, this.renderOpts));\n\n              case 5:\n                _context17.prev = 5;\n                _context17.next = 8;\n                return (0, _render.renderErrorToHTML)(err, req, res, pathname, query, this.renderOpts);\n\n              case 8:\n                return _context17.abrupt('return', _context17.sent);\n\n              case 11:\n                _context17.prev = 11;\n                _context17.t0 = _context17['catch'](5);\n\n                if (!this.dev) {\n                  _context17.next = 19;\n                  break;\n                }\n\n                if (!this.quiet) console.error(_context17.t0);\n                res.statusCode = 500;\n                return _context17.abrupt('return', (0, _render.renderErrorToHTML)(_context17.t0, req, res, pathname, query, this.renderOpts));\n\n              case 19:\n                throw _context17.t0;\n\n              case 20:\n              case 'end':\n                return _context17.stop();\n            }\n          }\n        }, _callee17, this, [[5, 11]]);\n      }));\n\n      function renderErrorToHTML(_x49, _x50, _x51, _x52, _x53) {\n        return _ref18.apply(this, arguments);\n      }\n\n      return renderErrorToHTML;\n    }()\n  }, {\n    key: 'render404',\n    value: function () {\n      var _ref19 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee18(req, res) {\n        var parsedUrl = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : (0, _url.parse)(req.url, true);\n        var pathname, query;\n        return _regenerator2.default.wrap(function _callee18$(_context18) {\n          while (1) {\n            switch (_context18.prev = _context18.next) {\n              case 0:\n                pathname = parsedUrl.pathname, query = parsedUrl.query;\n\n                res.statusCode = 404;\n                return _context18.abrupt('return', this.renderError(null, req, res, pathname, query));\n\n              case 3:\n              case 'end':\n                return _context18.stop();\n            }\n          }\n        }, _callee18, this);\n      }));\n\n      function render404(_x54, _x55) {\n        return _ref19.apply(this, arguments);\n      }\n\n      return render404;\n    }()\n  }, {\n    key: 'renderJSON',\n    value: function () {\n      var _ref20 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee19(req, res, page) {\n        var compilationErr;\n        return _regenerator2.default.wrap(function _callee19$(_context19) {\n          while (1) {\n            switch (_context19.prev = _context19.next) {\n              case 0:\n                if (!this.dev) {\n                  _context19.next = 4;\n                  break;\n                }\n\n                compilationErr = this.getCompilationError(page);\n\n                if (!compilationErr) {\n                  _context19.next = 4;\n                  break;\n                }\n\n                return _context19.abrupt('return', this.renderErrorJSON(compilationErr, req, res));\n\n              case 4:\n                _context19.prev = 4;\n                _context19.next = 7;\n                return (0, _render.renderJSON)(req, res, page, this.renderOpts);\n\n              case 7:\n                return _context19.abrupt('return', _context19.sent);\n\n              case 10:\n                _context19.prev = 10;\n                _context19.t0 = _context19['catch'](4);\n\n                if (!(_context19.t0.code === 'ENOENT')) {\n                  _context19.next = 17;\n                  break;\n                }\n\n                res.statusCode = 404;\n                return _context19.abrupt('return', this.renderErrorJSON(null, req, res));\n\n              case 17:\n                if (!this.quiet) console.error(_context19.t0);\n                res.statusCode = 500;\n                return _context19.abrupt('return', this.renderErrorJSON(_context19.t0, req, res));\n\n              case 20:\n              case 'end':\n                return _context19.stop();\n            }\n          }\n        }, _callee19, this, [[4, 10]]);\n      }));\n\n      function renderJSON(_x57, _x58, _x59) {\n        return _ref20.apply(this, arguments);\n      }\n\n      return renderJSON;\n    }()\n  }, {\n    key: 'renderErrorJSON',\n    value: function () {\n      var _ref21 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee20(err, req, res) {\n        var compilationErr;\n        return _regenerator2.default.wrap(function _callee20$(_context20) {\n          while (1) {\n            switch (_context20.prev = _context20.next) {\n              case 0:\n                if (!this.dev) {\n                  _context20.next = 5;\n                  break;\n                }\n\n                compilationErr = this.getCompilationError('/_error');\n\n                if (!compilationErr) {\n                  _context20.next = 5;\n                  break;\n                }\n\n                res.statusCode = 500;\n                return _context20.abrupt('return', (0, _render.renderErrorJSON)(compilationErr, req, res, this.renderOpts));\n\n              case 5:\n                return _context20.abrupt('return', (0, _render.renderErrorJSON)(err, req, res, this.renderOpts));\n\n              case 6:\n              case 'end':\n                return _context20.stop();\n            }\n          }\n        }, _callee20, this);\n      }));\n\n      function renderErrorJSON(_x60, _x61, _x62) {\n        return _ref21.apply(this, arguments);\n      }\n\n      return renderErrorJSON;\n    }()\n  }, {\n    key: 'serveStatic',\n    value: function () {\n      var _ref22 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee21(req, res, path) {\n        return _regenerator2.default.wrap(function _callee21$(_context21) {\n          while (1) {\n            switch (_context21.prev = _context21.next) {\n              case 0:\n                _context21.prev = 0;\n                _context21.next = 3;\n                return (0, _render.serveStatic)(req, res, path);\n\n              case 3:\n                return _context21.abrupt('return', _context21.sent);\n\n              case 6:\n                _context21.prev = 6;\n                _context21.t0 = _context21['catch'](0);\n\n                if (!(_context21.t0.code === 'ENOENT')) {\n                  _context21.next = 12;\n                  break;\n                }\n\n                this.render404(req, res);\n                _context21.next = 13;\n                break;\n\n              case 12:\n                throw _context21.t0;\n\n              case 13:\n              case 'end':\n                return _context21.stop();\n            }\n          }\n        }, _callee21, this, [[0, 6]]);\n      }));\n\n      function serveStatic(_x63, _x64, _x65) {\n        return _ref22.apply(this, arguments);\n      }\n\n      return serveStatic;\n    }()\n  }, {\n    key: 'isInternalUrl',\n    value: function isInternalUrl(req) {\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = (0, _getIterator3.default)(internalPrefixes), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var prefix = _step2.value;\n\n          if (prefix.test(req.url)) {\n            return true;\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: 'readBuildId',\n    value: function readBuildId() {\n      var buildIdPath = (0, _path.join)(this.dir, this.dist, 'BUILD_ID');\n      var buildId = _fs2.default.readFileSync(buildIdPath, 'utf8');\n      return buildId.trim();\n    }\n  }, {\n    key: 'handleBuildId',\n    value: function handleBuildId(buildId, res) {\n      if (this.dev) return true;\n      if (buildId !== this.renderOpts.buildId) {\n        return false;\n      }\n\n      res.setHeader('Cache-Control', 'max-age=365000000, immutable');\n      return true;\n    }\n  }, {\n    key: 'getCompilationError',\n    value: function getCompilationError(page) {\n      if (!this.hotReloader) return;\n\n      var errors = this.hotReloader.getCompilationErrors();\n      if (!errors.size) return;\n\n      var id = (0, _path.join)(this.dir, this.dist, 'bundles', 'pages', page);\n      var p = (0, _resolve.resolveFromList)(id, errors.keys());\n      if (p) return errors.get(p)[0];\n    }\n  }, {\n    key: 'handleBuildHash',\n    value: function handleBuildHash(filename, hash, res) {\n      if (this.dev) return;\n      if (hash !== this.buildStats[filename].hash) {\n        throw new Error('Invalid Build File Hash(' + hash + ') for chunk: ' + filename);\n      }\n\n      res.setHeader('Cache-Control', 'max-age=365000000, immutable');\n    }\n  }]);\n  return Server;\n}();\n\nexports.default = Server;","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/dist/server/render.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.renderErrorJSON = exports.renderJSON = exports.renderError = exports.render = undefined;\n\nvar _stringify = require('babel-runtime/core-js/json/stringify');\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _slicedToArray2 = require('babel-runtime/helpers/slicedToArray');\n\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar render = exports.render = function () {\n  var _ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(req, res, pathname, query, opts) {\n    var html;\n    return _regenerator2.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return renderToHTML(req, res, pathname, opts);\n\n          case 2:\n            html = _context.sent;\n\n            sendHTML(res, html, req.method);\n\n          case 4:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function render(_x, _x2, _x3, _x4, _x5) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar renderError = exports.renderError = function () {\n  var _ref2 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2(err, req, res, pathname, query, opts) {\n    var html;\n    return _regenerator2.default.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return renderErrorToHTML(err, req, res, query, opts);\n\n          case 2:\n            html = _context2.sent;\n\n            sendHTML(res, html, req.method);\n\n          case 4:\n          case 'end':\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this);\n  }));\n\n  return function renderError(_x6, _x7, _x8, _x9, _x10, _x11) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar doRender = function () {\n  var _ref3 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3(req, res, pathname, query) {\n    var _ref4 = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {},\n        err = _ref4.err,\n        page = _ref4.page,\n        buildId = _ref4.buildId,\n        buildStats = _ref4.buildStats,\n        hotReloader = _ref4.hotReloader,\n        _ref4$dir = _ref4.dir,\n        dir = _ref4$dir === undefined ? process.cwd() : _ref4$dir,\n        _ref4$dev = _ref4.dev,\n        dev = _ref4$dev === undefined ? false : _ref4$dev,\n        _ref4$staticMarkup = _ref4.staticMarkup,\n        staticMarkup = _ref4$staticMarkup === undefined ? false : _ref4$staticMarkup;\n\n    var dist, _ref5, _ref6, Component, Document, ctx, _ref7, _ref8, props, component, errorComponent, renderPage, docProps, doc;\n\n    return _regenerator2.default.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            page = page || pathname;\n\n            _context3.next = 3;\n            return ensurePage(page, { dir: dir, hotReloader: hotReloader });\n\n          case 3:\n            dist = (0, _config2.default)(dir).distDir;\n            _context3.next = 6;\n            return _promise2.default.all([(0, _require2.default)((0, _path.join)(dir, dist, 'dist', 'pages', page)), (0, _require2.default)((0, _path.join)(dir, dist, 'dist', 'pages', '_document'))]);\n\n          case 6:\n            _ref5 = _context3.sent;\n            _ref6 = (0, _slicedToArray3.default)(_ref5, 2);\n            Component = _ref6[0];\n            Document = _ref6[1];\n\n            Component = Component.default || Component;\n            Document = Document.default || Document;\n            ctx = { err: err, req: req, res: res, pathname: pathname, query: query };\n            _context3.next = 15;\n            return _promise2.default.all([(0, _utils.loadGetInitialProps)(Component, ctx), (0, _readPage2.default)((0, _path.join)(dir, dist, 'bundles', 'pages', page)), (0, _readPage2.default)((0, _path.join)(dir, dist, 'bundles', 'pages', '_error'))]);\n\n          case 15:\n            _ref7 = _context3.sent;\n            _ref8 = (0, _slicedToArray3.default)(_ref7, 3);\n            props = _ref8[0];\n            component = _ref8[1];\n            errorComponent = _ref8[2];\n\n            if (!res.finished) {\n              _context3.next = 22;\n              break;\n            }\n\n            return _context3.abrupt('return');\n\n          case 22:\n            renderPage = function renderPage() {\n              var app = (0, _react.createElement)(_app2.default, {\n                Component: Component,\n                props: props,\n                router: new _router.Router(pathname, query)\n              });\n\n              var render = staticMarkup ? _server.renderToStaticMarkup : _server.renderToString;\n\n              var html = void 0;\n              var head = void 0;\n              var errorHtml = '';\n              try {\n                html = render(app);\n              } finally {\n                head = _head2.default.rewind() || (0, _head.defaultHead)();\n              }\n\n              if (err && dev) {\n                errorHtml = render((0, _react.createElement)(_errorDebug2.default, { error: err }));\n              }\n\n              return { html: html, head: head, errorHtml: errorHtml };\n            };\n\n            _context3.next = 25;\n            return (0, _utils.loadGetInitialProps)(Document, (0, _extends3.default)({}, ctx, { renderPage: renderPage }));\n\n          case 25:\n            docProps = _context3.sent;\n\n            if (!res.finished) {\n              _context3.next = 28;\n              break;\n            }\n\n            return _context3.abrupt('return');\n\n          case 28:\n            doc = (0, _react.createElement)(Document, (0, _extends3.default)({\n              __NEXT_DATA__: {\n                component: component,\n                errorComponent: errorComponent,\n                props: props,\n                pathname: pathname,\n                query: query,\n                buildId: buildId,\n                buildStats: buildStats,\n                err: err && dev ? errorToJSON(err) : null\n              },\n              dev: dev,\n              staticMarkup: staticMarkup\n            }, docProps));\n            return _context3.abrupt('return', '<!DOCTYPE html>' + (0, _server.renderToStaticMarkup)(doc));\n\n          case 30:\n          case 'end':\n            return _context3.stop();\n        }\n      }\n    }, _callee3, this);\n  }));\n\n  return function doRender(_x13, _x14, _x15, _x16) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nvar renderJSON = exports.renderJSON = function () {\n  var _ref9 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee4(req, res, page) {\n    var _ref10 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},\n        _ref10$dir = _ref10.dir,\n        dir = _ref10$dir === undefined ? process.cwd() : _ref10$dir,\n        hotReloader = _ref10.hotReloader;\n\n    var dist, pagePath;\n    return _regenerator2.default.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            dist = (0, _config2.default)(dir).distDir;\n            _context4.next = 3;\n            return ensurePage(page, { dir: dir, hotReloader: hotReloader });\n\n          case 3:\n            _context4.next = 5;\n            return (0, _resolve2.default)((0, _path.join)(dir, dist, 'bundles', 'pages', page));\n\n          case 5:\n            pagePath = _context4.sent;\n            return _context4.abrupt('return', serveStatic(req, res, pagePath));\n\n          case 7:\n          case 'end':\n            return _context4.stop();\n        }\n      }\n    }, _callee4, this);\n  }));\n\n  return function renderJSON(_x18, _x19, _x20) {\n    return _ref9.apply(this, arguments);\n  };\n}();\n\nvar renderErrorJSON = exports.renderErrorJSON = function () {\n  var _ref11 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee5(err, req, res) {\n    var _ref12 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},\n        _ref12$dir = _ref12.dir,\n        dir = _ref12$dir === undefined ? process.cwd() : _ref12$dir,\n        _ref12$dev = _ref12.dev,\n        dev = _ref12$dev === undefined ? false : _ref12$dev;\n\n    var dist, component;\n    return _regenerator2.default.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            dist = (0, _config2.default)(dir).distDir;\n            _context5.next = 3;\n            return (0, _readPage2.default)((0, _path.join)(dir, dist, 'bundles', 'pages', '_error'));\n\n          case 3:\n            component = _context5.sent;\n\n\n            sendJSON(res, {\n              component: component,\n              err: err && dev ? errorToJSON(err) : null\n            }, req.method);\n\n          case 5:\n          case 'end':\n            return _context5.stop();\n        }\n      }\n    }, _callee5, this);\n  }));\n\n  return function renderErrorJSON(_x22, _x23, _x24) {\n    return _ref11.apply(this, arguments);\n  };\n}();\n\nvar ensurePage = function () {\n  var _ref13 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee6(page, _ref14) {\n    var dir = _ref14.dir,\n        hotReloader = _ref14.hotReloader;\n    return _regenerator2.default.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            if (hotReloader) {\n              _context6.next = 2;\n              break;\n            }\n\n            return _context6.abrupt('return');\n\n          case 2:\n            if (!(page === '_error' || page === '_document')) {\n              _context6.next = 4;\n              break;\n            }\n\n            return _context6.abrupt('return');\n\n          case 4:\n            _context6.next = 6;\n            return hotReloader.ensurePage(page);\n\n          case 6:\n          case 'end':\n            return _context6.stop();\n        }\n      }\n    }, _callee6, this);\n  }));\n\n  return function ensurePage(_x26, _x27) {\n    return _ref13.apply(this, arguments);\n  };\n}();\n\nexports.renderToHTML = renderToHTML;\nexports.renderErrorToHTML = renderErrorToHTML;\nexports.sendHTML = sendHTML;\nexports.sendJSON = sendJSON;\nexports.serveStatic = serveStatic;\n\nvar _path = require('path');\n\nvar _react = require('react');\n\nvar _server = require('react-dom/server');\n\nvar _send = require('send');\n\nvar _send2 = _interopRequireDefault(_send);\n\nvar _require = require('./require');\n\nvar _require2 = _interopRequireDefault(_require);\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _resolve = require('./resolve');\n\nvar _resolve2 = _interopRequireDefault(_resolve);\n\nvar _readPage = require('./read-page');\n\nvar _readPage2 = _interopRequireDefault(_readPage);\n\nvar _router = require('../lib/router');\n\nvar _utils = require('../lib/utils');\n\nvar _head = require('../lib/head');\n\nvar _head2 = _interopRequireDefault(_head);\n\nvar _app = require('../lib/app');\n\nvar _app2 = _interopRequireDefault(_app);\n\nvar _errorDebug = require('../lib/error-debug');\n\nvar _errorDebug2 = _interopRequireDefault(_errorDebug);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction renderToHTML(req, res, pathname, query, opts) {\n  return doRender(req, res, pathname, query, opts);\n}\n\nfunction renderErrorToHTML(err, req, res, pathname, query) {\n  var opts = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n\n  return doRender(req, res, pathname, query, (0, _extends3.default)({}, opts, { err: err, page: '_error' }));\n}\n\nfunction sendHTML(res, html, method) {\n  if (res.finished) return;\n\n  res.setHeader('Content-Type', 'text/html');\n  res.setHeader('Content-Length', Buffer.byteLength(html));\n  res.end(method === 'HEAD' ? null : html);\n}\n\nfunction sendJSON(res, obj, method) {\n  if (res.finished) return;\n\n  var json = (0, _stringify2.default)(obj);\n  res.setHeader('Content-Type', 'application/json');\n  res.setHeader('Content-Length', Buffer.byteLength(json));\n  res.end(method === 'HEAD' ? null : json);\n}\n\nfunction errorToJSON(err) {\n  var name = err.name,\n      message = err.message,\n      stack = err.stack;\n\n  var json = { name: name, message: message, stack: stack };\n\n  if (err.module) {\n    // rawRequest contains the filename of the module which has the error.\n    var rawRequest = err.module.rawRequest;\n\n    json.module = { rawRequest: rawRequest };\n  }\n\n  return json;\n}\n\nfunction serveStatic(req, res, path) {\n  return new _promise2.default(function (resolve, reject) {\n    (0, _send2.default)(req, path).on('directory', function () {\n      // We don't allow directories to be read.\n      var err = new Error('No directory access');\n      err.code = 'ENOENT';\n      reject(err);\n    }).on('error', reject).pipe(res).on('finish', resolve);\n  });\n}","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/dist/bin/next":"#!/usr/bin/env node\n'use strict';\n\nvar _from = require('babel-runtime/core-js/array/from');\n\nvar _from2 = _interopRequireDefault(_from);\n\nvar _set = require('babel-runtime/core-js/set');\n\nvar _set2 = _interopRequireDefault(_set);\n\nvar _keys = require('babel-runtime/core-js/object/keys');\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _path = require('path');\n\nvar _crossSpawn = require('cross-spawn');\n\nvar _fs = require('fs');\n\nvar _package = require('../../package.json');\n\nvar _package2 = _interopRequireDefault(_package);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nif (_package2.default.peerDependencies) {\n  (0, _keys2.default)(_package2.default.peerDependencies).forEach(function (dependency) {\n    try {\n      // When 'npm link' is used it checks the clone location. Not the project.\n      require.resolve(dependency);\n    } catch (err) {\n      console.warn(dependency + ' not found. Please install ' + dependency + ' using \\'npm install ' + dependency + '\\'');\n    }\n  });\n}\n\nvar defaultCommand = 'dev';\nvar commands = new _set2.default(['init', 'build', 'start', defaultCommand]);\n\nvar cmd = process.argv[2];\nvar args = void 0;\n\nif (new _set2.default(['--version', '-v']).has(cmd)) {\n  console.log('next.js v' + _package2.default.version);\n  process.exit(0);\n}\n\nif (new _set2.default(['--help', '-h']).has(cmd)) {\n  console.log('\\n    Usage\\n      $ next <command>\\n\\n    Available commands\\n      ' + (0, _from2.default)(commands).join(', ') + '\\n\\n    For more information run a command with the --help flag\\n      $ next init --help\\n  ');\n  process.exit(0);\n}\n\nif (commands.has(cmd)) {\n  args = process.argv.slice(3);\n} else {\n  cmd = defaultCommand;\n  args = process.argv.slice(2);\n}\n\nvar bin = (0, _path.join)(__dirname, 'next-' + cmd);\n\nvar startProcess = function startProcess() {\n  var proc = (0, _crossSpawn.spawn)(bin, args, { stdio: 'inherit', customFds: [0, 1, 2] });\n  proc.on('close', function (code, signal) {\n    if (code !== null) {\n      process.exit(code);\n    }\n    if (signal) {\n      if (signal === 'SIGKILL') {\n        process.exit(137);\n      }\n      console.log('got signal ' + signal + ', exiting');\n      process.exit(1);\n    }\n    process.exit(0);\n  });\n  proc.on('error', function (err) {\n    console.error(err);\n    process.exit(1);\n  });\n  return proc;\n};\n\nvar proc = startProcess();\n\nif (cmd === 'dev') {\n  (0, _fs.watchFile)((0, _path.join)(process.cwd(), 'next.config.js'), function (cur, prev) {\n    if (cur.size > 0 || prev.size > 0) {\n      console.log('\\n> Found a change in next.config.js, restarting the server...');\n      // Don't listen to 'close' now since otherwise parent gets killed by listener\n      proc.removeAllListeners('close');\n      proc.kill();\n      proc = startProcess();\n    }\n  });\n}","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/babel.js":"module.exports = require('./dist/server/build/babel/preset')\n","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/dist/server/build/babel/preset.js":"'use strict';\n\nvar _toConsumableArray2 = require('babel-runtime/helpers/toConsumableArray');\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar relativeResolve = require('../root-module-relative-path').default(require);\n\nvar envPlugins = {\n  'development': [require.resolve('babel-plugin-transform-react-jsx-source')],\n  'production': [require.resolve('babel-plugin-transform-react-remove-prop-types')]\n};\n\nvar plugins = envPlugins[process.env.NODE_ENV] || [];\n\nmodule.exports = {\n  presets: [[require.resolve('babel-preset-latest'), {\n    'es2015': { modules: false }\n  }], require.resolve('babel-preset-react')],\n  plugins: [require.resolve('babel-plugin-react-require'), require.resolve('babel-plugin-transform-object-rest-spread'), require.resolve('babel-plugin-transform-class-properties'), require.resolve('babel-plugin-transform-runtime'), require.resolve('styled-jsx/babel')].concat((0, _toConsumableArray3.default)(plugins), [[require.resolve('babel-plugin-module-resolver'), {\n    alias: {\n      'babel-runtime': relativeResolve('babel-runtime/package'),\n      'next/link': relativeResolve('../../../lib/link'),\n      'next/prefetch': relativeResolve('../../../lib/prefetch'),\n      'next/css': relativeResolve('../../../lib/css'),\n      'next/head': relativeResolve('../../../lib/head'),\n      'next/document': relativeResolve('../../../server/document'),\n      'next/router': relativeResolve('../../../lib/router'),\n      'next/error': relativeResolve('../../../lib/error')\n    }\n  }]])\n};","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/dist/server/build/root-module-relative-path.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _path = require('path');\n\nvar RELATIVE_START = 'node_modules' + _path.sep;\n\n// Pass in the module's `require` object since it's module-specific.\n// Next.js needs to use module.resolve to generate paths to modules it includes,\n// but those paths need to be relative to something so that they're portable\n// across directories and machines.\n//\n// This function returns paths relative to the top-level 'node_modules'\n// directory found in the path. If none is found, returns the complete path.\n\nexports.default = function (moduleRequire) {\n  return function (path) {\n    // package.json removed because babel-runtime is resolved as\n    // \"babel-runtime/package\"\n    var absolutePath = moduleRequire.resolve(path).replace(/[\\\\/]package\\.json$/, '');\n\n    var relativeStartIndex = absolutePath.indexOf(RELATIVE_START);\n\n    if (relativeStartIndex === -1) {\n      return absolutePath;\n    }\n\n    return absolutePath.substring(relativeStartIndex + RELATIVE_START.length);\n  };\n};","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/css.js":"module.exports = require('./dist/lib/css')\n","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/dist/lib/css.js":"\"use strict\";\n\nthrow new Error(\"'next/css' has been removed in Next.js 2.0. Please refer to the migration guide: https://github.com/zeit/next.js/wiki/Migrating-from-next-css\");","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/document.js":"module.exports = require('./dist/server/document')\n","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/dist/server/document.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NextScript = exports.Main = exports.Head = undefined;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _htmlescape = require('htmlescape');\n\nvar _htmlescape2 = _interopRequireDefault(_htmlescape);\n\nvar _server = require('styled-jsx/server');\n\nvar _server2 = _interopRequireDefault(_server);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Document = function (_Component) {\n  (0, _inherits3.default)(Document, _Component);\n\n  function Document() {\n    (0, _classCallCheck3.default)(this, Document);\n    return (0, _possibleConstructorReturn3.default)(this, (Document.__proto__ || (0, _getPrototypeOf2.default)(Document)).apply(this, arguments));\n  }\n\n  (0, _createClass3.default)(Document, [{\n    key: 'getChildContext',\n    value: function getChildContext() {\n      return { _documentProps: this.props };\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement(\n        'html',\n        null,\n        _react2.default.createElement(Head, null),\n        _react2.default.createElement(\n          'body',\n          null,\n          _react2.default.createElement(Main, null),\n          _react2.default.createElement(NextScript, null)\n        )\n      );\n    }\n  }], [{\n    key: 'getInitialProps',\n    value: function getInitialProps(_ref) {\n      var renderPage = _ref.renderPage;\n\n      var _renderPage = renderPage(),\n          html = _renderPage.html,\n          head = _renderPage.head,\n          errorHtml = _renderPage.errorHtml;\n\n      var styles = (0, _server2.default)();\n      return { html: html, head: head, errorHtml: errorHtml, styles: styles };\n    }\n  }]);\n  return Document;\n}(_react.Component);\n\nDocument.childContextTypes = {\n  _documentProps: _react.PropTypes.any\n};\nexports.default = Document;\n\nvar Head = exports.Head = function (_Component2) {\n  (0, _inherits3.default)(Head, _Component2);\n\n  function Head() {\n    (0, _classCallCheck3.default)(this, Head);\n    return (0, _possibleConstructorReturn3.default)(this, (Head.__proto__ || (0, _getPrototypeOf2.default)(Head)).apply(this, arguments));\n  }\n\n  (0, _createClass3.default)(Head, [{\n    key: 'render',\n    value: function render() {\n      var _context$_documentPro = this.context._documentProps,\n          head = _context$_documentPro.head,\n          styles = _context$_documentPro.styles;\n\n      return _react2.default.createElement(\n        'head',\n        null,\n        (head || []).map(function (h, i) {\n          return _react2.default.cloneElement(h, { key: i });\n        }),\n        styles || null,\n        this.props.children\n      );\n    }\n  }]);\n  return Head;\n}(_react.Component);\n\nHead.contextTypes = {\n  _documentProps: _react.PropTypes.any\n};\n\nvar Main = exports.Main = function (_Component3) {\n  (0, _inherits3.default)(Main, _Component3);\n\n  function Main() {\n    (0, _classCallCheck3.default)(this, Main);\n    return (0, _possibleConstructorReturn3.default)(this, (Main.__proto__ || (0, _getPrototypeOf2.default)(Main)).apply(this, arguments));\n  }\n\n  (0, _createClass3.default)(Main, [{\n    key: 'render',\n    value: function render() {\n      var _context$_documentPro2 = this.context._documentProps,\n          html = _context$_documentPro2.html,\n          errorHtml = _context$_documentPro2.errorHtml;\n\n      return _react2.default.createElement(\n        'div',\n        null,\n        _react2.default.createElement('div', { id: '__next', dangerouslySetInnerHTML: { __html: html } }),\n        _react2.default.createElement('div', { id: '__next-error', dangerouslySetInnerHTML: { __html: errorHtml } })\n      );\n    }\n  }]);\n  return Main;\n}(_react.Component);\n\nMain.contextTypes = {\n  _documentProps: _react.PropTypes.any\n};\n\nvar NextScript = exports.NextScript = function (_Component4) {\n  (0, _inherits3.default)(NextScript, _Component4);\n\n  function NextScript() {\n    (0, _classCallCheck3.default)(this, NextScript);\n    return (0, _possibleConstructorReturn3.default)(this, (NextScript.__proto__ || (0, _getPrototypeOf2.default)(NextScript)).apply(this, arguments));\n  }\n\n  (0, _createClass3.default)(NextScript, [{\n    key: 'getChunkScript',\n    value: function getChunkScript(filename) {\n      var additionalProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var __NEXT_DATA__ = this.context._documentProps.__NEXT_DATA__;\n      var buildStats = __NEXT_DATA__.buildStats;\n\n      var hash = buildStats ? buildStats[filename].hash : '-';\n\n      return _react2.default.createElement('script', (0, _extends3.default)({\n        type: 'text/javascript',\n        src: '/_next/' + hash + '/' + filename\n      }, additionalProps));\n    }\n  }, {\n    key: 'getScripts',\n    value: function getScripts() {\n      var dev = this.context._documentProps.dev;\n\n      if (dev) {\n        return _react2.default.createElement(\n          'div',\n          null,\n          this.getChunkScript('manifest.js'),\n          this.getChunkScript('commons.js'),\n          this.getChunkScript('main.js')\n        );\n      }\n\n      // In the production mode, we have a single asset with all the JS content.\n      // So, we can load the script with async\n      return this.getChunkScript('app.js', { async: true });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _context$_documentPro3 = this.context._documentProps,\n          staticMarkup = _context$_documentPro3.staticMarkup,\n          __NEXT_DATA__ = _context$_documentPro3.__NEXT_DATA__;\n\n\n      return _react2.default.createElement(\n        'div',\n        null,\n        staticMarkup ? null : _react2.default.createElement('script', { dangerouslySetInnerHTML: {\n            __html: '__NEXT_DATA__ = ' + (0, _htmlescape2.default)(__NEXT_DATA__) + '; module={};'\n          } }),\n        staticMarkup ? null : this.getScripts()\n      );\n    }\n  }]);\n  return NextScript;\n}(_react.Component);\n\nNextScript.contextTypes = {\n  _documentProps: _react.PropTypes.any\n};","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/error.js":"module.exports = require('./dist/lib/error')\n","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/dist/lib/error.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _httpStatus = require('http-status');\n\nvar _httpStatus2 = _interopRequireDefault(_httpStatus);\n\nvar _head = require('./head');\n\nvar _head2 = _interopRequireDefault(_head);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Error = function (_React$Component) {\n  (0, _inherits3.default)(Error, _React$Component);\n\n  function Error() {\n    (0, _classCallCheck3.default)(this, Error);\n    return (0, _possibleConstructorReturn3.default)(this, (Error.__proto__ || (0, _getPrototypeOf2.default)(Error)).apply(this, arguments));\n  }\n\n  (0, _createClass3.default)(Error, [{\n    key: 'render',\n    value: function render() {\n      var statusCode = this.props.statusCode;\n\n      var title = statusCode === 404 ? 'This page could not be found' : _httpStatus2.default[statusCode] || 'An unexpected error has occurred';\n\n      return _react2.default.createElement(\n        'div',\n        { style: styles.error },\n        _react2.default.createElement(\n          _head2.default,\n          null,\n          _react2.default.createElement('meta', { name: 'viewport', content: 'width=device-width, initial-scale=1.0' })\n        ),\n        _react2.default.createElement(\n          'div',\n          null,\n          _react2.default.createElement('style', { dangerouslySetInnerHTML: { __html: 'body { margin: 0 }' } }),\n          statusCode ? _react2.default.createElement(\n            'h1',\n            { style: styles.h1 },\n            statusCode\n          ) : null,\n          _react2.default.createElement(\n            'div',\n            { style: styles.desc },\n            _react2.default.createElement(\n              'h2',\n              { style: styles.h2 },\n              title,\n              '.'\n            )\n          )\n        )\n      );\n    }\n  }], [{\n    key: 'getInitialProps',\n    value: function getInitialProps(_ref) {\n      var res = _ref.res,\n          jsonPageRes = _ref.jsonPageRes;\n\n      var statusCode = res ? res.statusCode : jsonPageRes ? jsonPageRes.status : null;\n      return { statusCode: statusCode };\n    }\n  }]);\n  return Error;\n}(_react2.default.Component);\n\nexports.default = Error;\n\n\nvar styles = {\n  error: {\n    color: '#000',\n    background: '#fff',\n    fontFamily: '-apple-system, BlinkMacSystemFont, Roboto, \"Segoe UI\", \"Fira Sans\", Avenir, \"Helvetica Neue\", \"Lucida Grande\", sans-serif',\n    height: '100vh',\n    textAlign: 'center',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n\n  desc: {\n    display: 'inline-block',\n    textAlign: 'left',\n    lineHeight: '49px',\n    height: '49px',\n    verticalAlign: 'middle'\n  },\n\n  h1: {\n    display: 'inline-block',\n    borderRight: '1px solid rgba(0, 0, 0,.3)',\n    margin: 0,\n    marginRight: '20px',\n    padding: '10px 23px 10px 0',\n    fontSize: '24px',\n    fontWeight: 500,\n    verticalAlign: 'top'\n  },\n\n  h2: {\n    fontSize: '14px',\n    fontWeight: 'normal',\n    margin: 0,\n    padding: 0\n  }\n};","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/dist/lib/head.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _set = require('babel-runtime/core-js/set');\n\nvar _set2 = _interopRequireDefault(_set);\n\nvar _toConsumableArray2 = require('babel-runtime/helpers/toConsumableArray');\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nexports.defaultHead = defaultHead;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _sideEffect = require('./side-effect');\n\nvar _sideEffect2 = _interopRequireDefault(_sideEffect);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Head = function (_React$Component) {\n  (0, _inherits3.default)(Head, _React$Component);\n\n  function Head() {\n    (0, _classCallCheck3.default)(this, Head);\n    return (0, _possibleConstructorReturn3.default)(this, (Head.__proto__ || (0, _getPrototypeOf2.default)(Head)).apply(this, arguments));\n  }\n\n  (0, _createClass3.default)(Head, [{\n    key: 'render',\n    value: function render() {\n      return null;\n    }\n  }]);\n  return Head;\n}(_react2.default.Component);\n\nHead.contextTypes = {\n  headManager: _react2.default.PropTypes.object\n};\nfunction defaultHead() {\n  return [_react2.default.createElement('meta', { charSet: 'utf-8', className: 'next-head' })];\n}\n\nfunction reduceComponents(components) {\n  var _components$map$filte;\n\n  return (_components$map$filte = components.map(function (c) {\n    return c.props.children;\n  }).filter(function (c) {\n    return !!c;\n  }).map(function (children) {\n    return _react2.default.Children.toArray(children);\n  }).reduce(function (a, b) {\n    return a.concat(b);\n  }, []).reverse()).concat.apply(_components$map$filte, (0, _toConsumableArray3.default)(defaultHead())).filter(unique()).reverse().map(function (c) {\n    var className = (c.className ? c.className + ' ' : '') + 'next-head';\n    return _react2.default.cloneElement(c, { className: className });\n  });\n}\n\nfunction mapOnServer(head) {\n  return head;\n}\n\nfunction onStateChange(head) {\n  if (this.context && this.context.headManager) {\n    this.context.headManager.updateHead(head);\n  }\n}\n\nvar METATYPES = ['name', 'httpEquiv', 'charSet', 'itemProp'];\n\n// returns a function for filtering head child elements\n// which shouldn't be duplicated, like <title/>.\n\nfunction unique() {\n  var tags = new _set2.default();\n  var metaTypes = new _set2.default();\n  var metaCategories = {};\n\n  return function (h) {\n    switch (h.type) {\n      case 'title':\n      case 'base':\n        if (tags.has(h.type)) return false;\n        tags.add(h.type);\n        break;\n      case 'meta':\n        for (var i = 0, len = METATYPES.length; i < len; i++) {\n          var metatype = METATYPES[i];\n          if (!h.props.hasOwnProperty(metatype)) continue;\n\n          if (metatype === 'charSet') {\n            if (metaTypes.has(metatype)) return false;\n            metaTypes.add(metatype);\n          } else {\n            var category = h.props[metatype];\n            var categories = metaCategories[metatype] || new _set2.default();\n            if (categories.has(category)) return false;\n            categories.add(category);\n            metaCategories[metatype] = categories;\n          }\n        }\n        break;\n    }\n    return true;\n  };\n}\n\nexports.default = (0, _sideEffect2.default)(reduceComponents, onStateChange, mapOnServer)(Head);","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/dist/lib/side-effect.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _toConsumableArray2 = require('babel-runtime/helpers/toConsumableArray');\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _set = require('babel-runtime/core-js/set');\n\nvar _set2 = _interopRequireDefault(_set);\n\nexports.default = withSideEffect;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction withSideEffect(reduceComponentsToState, handleStateChangeOnClient, mapStateOnServer) {\n  if (typeof reduceComponentsToState !== 'function') {\n    throw new Error('Expected reduceComponentsToState to be a function.');\n  }\n\n  if (typeof handleStateChangeOnClient !== 'function') {\n    throw new Error('Expected handleStateChangeOnClient to be a function.');\n  }\n\n  if (typeof mapStateOnServer !== 'undefined' && typeof mapStateOnServer !== 'function') {\n    throw new Error('Expected mapStateOnServer to either be undefined or a function.');\n  }\n\n  function getDisplayName(WrappedComponent) {\n    return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n  }\n\n  return function wrap(WrappedComponent) {\n    if (typeof WrappedComponent !== 'function') {\n      throw new Error('Expected WrappedComponent to be a React component.');\n    }\n\n    var mountedInstances = new _set2.default();\n    var state = void 0;\n\n    function emitChange(component) {\n      state = reduceComponentsToState([].concat((0, _toConsumableArray3.default)(mountedInstances)));\n\n      if (SideEffect.canUseDOM) {\n        handleStateChangeOnClient.call(component, state);\n      } else if (mapStateOnServer) {\n        state = mapStateOnServer(state);\n      }\n    }\n\n    var SideEffect = function (_Component) {\n      (0, _inherits3.default)(SideEffect, _Component);\n\n      function SideEffect() {\n        (0, _classCallCheck3.default)(this, SideEffect);\n        return (0, _possibleConstructorReturn3.default)(this, (SideEffect.__proto__ || (0, _getPrototypeOf2.default)(SideEffect)).apply(this, arguments));\n      }\n\n      (0, _createClass3.default)(SideEffect, [{\n        key: 'componentWillMount',\n        value: function componentWillMount() {\n          mountedInstances.add(this);\n          emitChange(this);\n        }\n      }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate() {\n          emitChange(this);\n        }\n      }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n          mountedInstances.delete(this);\n          emitChange(this);\n        }\n      }, {\n        key: 'render',\n        value: function render() {\n          return _react2.default.createElement(\n            WrappedComponent,\n            null,\n            this.props.children\n          );\n        }\n      }], [{\n        key: 'peek',\n        value: function peek() {\n          return state;\n        }\n\n        // Expose canUseDOM so tests can monkeypatch it\n\n        // Try to use displayName of wrapped component\n\n      }, {\n        key: 'rewind',\n        value: function rewind() {\n          if (SideEffect.canUseDOM) {\n            throw new Error('You may only call rewind() on the server. Call peek() to read the current state.');\n          }\n\n          var recordedState = state;\n          state = undefined;\n          mountedInstances.clear();\n          return recordedState;\n        }\n      }]);\n      return SideEffect;\n    }(_react.Component);\n\n    SideEffect.displayName = 'SideEffect(' + getDisplayName(WrappedComponent) + ')';\n    SideEffect.contextTypes = WrappedComponent.contextTypes;\n    SideEffect.canUseDOM = typeof window !== 'undefined';\n\n\n    return SideEffect;\n  };\n}","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/head.js":"module.exports = require('./dist/lib/head')\n","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/link.js":"module.exports = require('./dist/lib/link')\n","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/dist/lib/link.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof2 = require('babel-runtime/helpers/typeof');\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _stringify = require('babel-runtime/core-js/json/stringify');\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _url = require('url');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _router = require('./router');\n\nvar _router2 = _interopRequireDefault(_router);\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Link = function (_Component) {\n  (0, _inherits3.default)(Link, _Component);\n\n  function Link(props) {\n    var _ref;\n\n    (0, _classCallCheck3.default)(this, Link);\n\n    for (var _len = arguments.length, rest = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      rest[_key - 1] = arguments[_key];\n    }\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (_ref = Link.__proto__ || (0, _getPrototypeOf2.default)(Link)).call.apply(_ref, [this, props].concat(rest)));\n\n    _this.linkClicked = _this.linkClicked.bind(_this);\n    _this.formatUrls(props);\n    return _this;\n  }\n\n  (0, _createClass3.default)(Link, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      this.formatUrls(nextProps);\n    }\n  }, {\n    key: 'linkClicked',\n    value: function linkClicked(e) {\n      var _this2 = this;\n\n      if (e.currentTarget.nodeName === 'A' && (e.metaKey || e.ctrlKey || e.shiftKey || e.nativeEvent && e.nativeEvent.which === 2)) {\n        // ignore click for new tab / new window behavior\n        return;\n      }\n\n      var href = this.href,\n          as = this.as;\n\n\n      if (!isLocal(href)) {\n        // ignore click if it's outside our scope\n        return;\n      }\n\n      var pathname = window.location.pathname;\n\n      href = (0, _url.resolve)(pathname, href);\n      as = as ? (0, _url.resolve)(pathname, as) : href;\n\n      e.preventDefault();\n\n      //  avoid scroll for urls with anchor refs\n      var scroll = this.props.scroll;\n\n      if (scroll == null) {\n        scroll = as.indexOf('#') < 0;\n      }\n\n      // replace state instead of push if prop is present\n      var replace = this.props.replace;\n\n      var changeMethod = replace ? 'replace' : 'push';\n\n      // straight up redirect\n      _router2.default[changeMethod](href, as).then(function (success) {\n        if (!success) return;\n        if (scroll) window.scrollTo(0, 0);\n      }).catch(function (err) {\n        if (_this2.props.onError) _this2.props.onError(err);\n      });\n    }\n  }, {\n    key: 'prefetch',\n    value: function prefetch() {\n      if (!this.props.prefetch) return;\n      if (typeof window === 'undefined') return;\n\n      // Prefetch the JSON page if asked (only in the client)\n      var pathname = window.location.pathname;\n\n      var href = (0, _url.resolve)(pathname, this.href);\n      _router2.default.prefetch(href);\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.prefetch();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if ((0, _stringify2.default)(this.props.href) !== (0, _stringify2.default)(prevProps.href)) {\n        this.prefetch();\n      }\n    }\n\n    // We accept both 'href' and 'as' as objects which we can pass to `url.format`.\n    // We'll handle it here.\n\n  }, {\n    key: 'formatUrls',\n    value: function formatUrls(props) {\n      this.href = props.href && (0, _typeof3.default)(props.href) === 'object' ? (0, _url.format)(props.href) : props.href;\n      this.as = props.as && (0, _typeof3.default)(props.as) === 'object' ? (0, _url.format)(props.as) : props.as;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var children = this.props.children;\n      var href = this.href,\n          as = this.as;\n      // Deprecated. Warning shown by propType check. If the childen provided is a string (<Link>example</Link>) we wrap it in an <a> tag\n\n      if (typeof children === 'string') {\n        children = _react2.default.createElement(\n          'a',\n          null,\n          children\n        );\n      }\n\n      // This will return the first child, if multiple are provided it will throw an error\n      var child = _react.Children.only(children);\n      var props = {\n        onClick: this.linkClicked\n      };\n\n      // If child is an <a> tag and doesn't have a href attribute we specify it so that repetition is not needed by the user\n      if (child.type === 'a' && !('href' in child.props)) {\n        props.href = as || href;\n      }\n\n      return _react2.default.cloneElement(child, props);\n    }\n  }]);\n  return Link;\n}(_react.Component);\n\nLink.propTypes = {\n  prefetch: _react.PropTypes.bool,\n  children: _react.PropTypes.oneOfType([_react.PropTypes.element, function (props, propName) {\n    var value = props[propName];\n\n    if (typeof value === 'string') {\n      warnLink('Warning: You\\'re using a string directly inside <Link>. This usage has been deprecated. Please add an <a> tag as child of <Link>');\n    }\n\n    return null;\n  }]).isRequired\n};\nexports.default = Link;\n\n\nfunction isLocal(href) {\n  var url = (0, _url.parse)(href, false, true);\n  var origin = (0, _url.parse)((0, _utils.getLocationOrigin)(), false, true);\n  return !url.host || !url.hostname || origin.host === url.host || origin.hostname === url.hostname;\n}\n\nvar warnLink = (0, _utils.execOnce)(_utils.warn);","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/dist/lib/router/index.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Router = exports.createRouter = undefined;\n\nvar _defineProperty = require('babel-runtime/core-js/object/define-property');\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nexports._notifyBuildIdMismatch = _notifyBuildIdMismatch;\n\nvar _router = require('./router');\n\nvar _router2 = _interopRequireDefault(_router);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SingletonRouter = {\n  router: null, // holds the actual router instance\n  readyCallbacks: [],\n  ready: function ready(cb) {\n    if (this.router) return cb();\n    if (typeof window !== 'undefined') {\n      this.readyCallbacks.push(cb);\n    }\n  }\n};\n\n// Create public properties and methods of the router in the SingletonRouter\n/* global window */\nvar propertyFields = ['components', 'pathname', 'route', 'query'];\nvar coreMethodFields = ['push', 'replace', 'reload', 'back', 'prefetch'];\nvar routerEvents = ['routeChangeStart', 'beforeHistoryChange', 'routeChangeComplete', 'routeChangeError'];\n\npropertyFields.forEach(function (field) {\n  // Here we need to use Object.defineProperty because, we need to return\n  // the property assigned to the actual router\n  // The value might get changed as we change routes and this is the\n  // proper way to access it\n  (0, _defineProperty2.default)(SingletonRouter, field, {\n    get: function get() {\n      throwIfNoRouter();\n      return SingletonRouter.router[field];\n    }\n  });\n});\n\ncoreMethodFields.forEach(function (field) {\n  SingletonRouter[field] = function () {\n    var _SingletonRouter$rout;\n\n    throwIfNoRouter();\n    return (_SingletonRouter$rout = SingletonRouter.router)[field].apply(_SingletonRouter$rout, arguments);\n  };\n});\n\nrouterEvents.forEach(function (event) {\n  SingletonRouter.ready(function () {\n    SingletonRouter.router.events.on(event, function () {\n      var eventField = 'on' + event.charAt(0).toUpperCase() + event.substring(1);\n      if (SingletonRouter[eventField]) {\n        SingletonRouter[eventField].apply(SingletonRouter, arguments);\n      }\n    });\n  });\n});\n\nfunction throwIfNoRouter() {\n  if (!SingletonRouter.router) {\n    var message = 'No router instance found.\\n' + 'You should only use \"next/router\" inside the client side of your app.\\n';\n    throw new Error(message);\n  }\n}\n\n// Export the SingletonRouter and this is the public API.\nexports.default = SingletonRouter;\n\n// INTERNAL APIS\n// -------------\n// (do not use following exports inside the app)\n\n// Create a router and assign it as the singleton instance.\n// This is used in client side when we are initilizing the app.\n// This should **not** use inside the server.\n\nvar createRouter = exports.createRouter = function createRouter() {\n  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  SingletonRouter.router = new (Function.prototype.bind.apply(_router2.default, [null].concat(args)))();\n  SingletonRouter.readyCallbacks.forEach(function (cb) {\n    return cb();\n  });\n  SingletonRouter.readyCallbacks = [];\n\n  return SingletonRouter.router;\n};\n\n// Export the actual Router class, which is usually used inside the server\nvar Router = exports.Router = _router2.default;\n\nfunction _notifyBuildIdMismatch(nextRoute) {\n  if (SingletonRouter.onAppUpdated) {\n    SingletonRouter.onAppUpdated(nextRoute);\n  } else {\n    console.warn('An app update detected. Loading the SSR version of \"' + nextRoute + '\"');\n    window.location.href = nextRoute;\n  }\n}","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/dist/lib/router/router.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _slicedToArray2 = require('babel-runtime/helpers/slicedToArray');\n\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\nvar _typeof2 = require('babel-runtime/helpers/typeof');\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _set = require('babel-runtime/core-js/set');\n\nvar _set2 = _interopRequireDefault(_set);\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar loadComponent = function () {\n  var _ref9 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee8(jsonData) {\n    var module, Component;\n    return _regenerator2.default.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            if (!(webpackModule && webpackModule.hot && webpackModule.hot.status() !== 'idle')) {\n              _context8.next = 3;\n              break;\n            }\n\n            _context8.next = 3;\n            return new _promise2.default(function (resolve) {\n              var check = function check(status) {\n                if (status === 'idle') {\n                  webpackModule.hot.removeStatusHandler(check);\n                  resolve();\n                }\n              };\n              webpackModule.hot.status(check);\n            });\n\n          case 3:\n            module = (0, _evalScript2.default)(jsonData.component);\n            Component = module.default || module;\n            return _context8.abrupt('return', { Component: Component, err: jsonData.err });\n\n          case 6:\n          case 'end':\n            return _context8.stop();\n        }\n      }\n    }, _callee8, this);\n  }));\n\n  return function loadComponent(_x22) {\n    return _ref9.apply(this, arguments);\n  };\n}();\n\nvar _url2 = require('url');\n\nvar _mitt = require('mitt');\n\nvar _mitt2 = _interopRequireDefault(_mitt);\n\nvar _unfetch = require('unfetch');\n\nvar _unfetch2 = _interopRequireDefault(_unfetch);\n\nvar _evalScript = require('../eval-script');\n\nvar _evalScript2 = _interopRequireDefault(_evalScript);\n\nvar _shallowEquals = require('../shallow-equals');\n\nvar _shallowEquals2 = _interopRequireDefault(_shallowEquals);\n\nvar _pQueue = require('../p-queue');\n\nvar _pQueue2 = _interopRequireDefault(_pQueue);\n\nvar _utils = require('../utils');\n\nvar _ = require('./');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar webpackModule = module;\n\nvar Router = function () {\n  function Router(pathname, query, as) {\n    var _ref = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},\n        Component = _ref.Component,\n        ErrorComponent = _ref.ErrorComponent,\n        err = _ref.err;\n\n    (0, _classCallCheck3.default)(this, Router);\n\n    // represents the current component key\n    this.route = toRoute(pathname);\n\n    // set up the component cache (by route keys)\n    this.components = (0, _defineProperty3.default)({}, this.route, { Component: Component, err: err });\n\n    // contain a map of promise of fetch routes\n    this.fetchingRoutes = {};\n\n    // Handling Router Events\n    this.events = (0, _mitt2.default)();\n\n    this.prefetchQueue = new _pQueue2.default({ concurrency: 2 });\n    this.ErrorComponent = ErrorComponent;\n    this.pathname = pathname;\n    this.query = query;\n    this.as = as;\n    this.subscriptions = new _set2.default();\n    this.componentLoadCancel = null;\n    this.onPopState = this.onPopState.bind(this);\n\n    if (typeof window !== 'undefined') {\n      // in order for `e.state` to work on the `onpopstate` event\n      // we have to register the initial route upon initialization\n      this.changeState('replaceState', (0, _url2.format)({ pathname: pathname, query: query }), (0, _utils.getURL)());\n\n      window.addEventListener('popstate', this.onPopState);\n    }\n  }\n\n  (0, _createClass3.default)(Router, [{\n    key: 'onPopState',\n    value: function () {\n      var _ref2 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(e) {\n        var pathname, query, _e$state, url, as, options;\n\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (e.state) {\n                  _context.next = 4;\n                  break;\n                }\n\n                // We get state as undefined for two reasons.\n                //  1. With older safari (< 8) and older chrome (< 34)\n                //  2. When the URL changed with #\n                //\n                // In the both cases, we don't need to proceed and change the route.\n                // (as it's already changed)\n                // But we can simply replace the state with the new changes.\n                // Actually, for (1) we don't need to nothing. But it's hard to detect that event.\n                // So, doing the following for (1) does no harm.\n                pathname = this.pathname, query = this.query;\n\n                this.changeState('replaceState', (0, _url2.format)({ pathname: pathname, query: query }), (0, _utils.getURL)());\n                return _context.abrupt('return');\n\n              case 4:\n                _e$state = e.state, url = _e$state.url, as = _e$state.as, options = _e$state.options;\n\n                this.replace(url, as, options);\n\n              case 6:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function onPopState(_x2) {\n        return _ref2.apply(this, arguments);\n      }\n\n      return onPopState;\n    }()\n  }, {\n    key: 'update',\n    value: function update(route, Component) {\n      var data = this.components[route];\n      if (!data) {\n        throw new Error('Cannot update unavailable route: ' + route);\n      }\n\n      var newData = (0, _extends3.default)({}, data, { Component: Component });\n      this.components[route] = newData;\n\n      if (route === this.route) {\n        this.notify(newData);\n      }\n    }\n  }, {\n    key: 'reload',\n    value: function () {\n      var _ref3 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2(route) {\n        var pathname, query, url, routeInfo, error;\n        return _regenerator2.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                delete this.components[route];\n                delete this.fetchingRoutes[route];\n\n                if (!(route !== this.route)) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                return _context2.abrupt('return');\n\n              case 4:\n                pathname = this.pathname, query = this.query;\n                url = window.location.href;\n\n\n                this.events.emit('routeChangeStart', url);\n                _context2.next = 9;\n                return this.getRouteInfo(route, pathname, query, url);\n\n              case 9:\n                routeInfo = _context2.sent;\n                error = routeInfo.error;\n\n                if (!(error && error.cancelled)) {\n                  _context2.next = 13;\n                  break;\n                }\n\n                return _context2.abrupt('return');\n\n              case 13:\n\n                this.notify(routeInfo);\n\n                if (!error) {\n                  _context2.next = 17;\n                  break;\n                }\n\n                this.events.emit('routeChangeError', error, url);\n                throw error;\n\n              case 17:\n\n                this.events.emit('routeChangeComplete', url);\n\n              case 18:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function reload(_x3) {\n        return _ref3.apply(this, arguments);\n      }\n\n      return reload;\n    }()\n  }, {\n    key: 'back',\n    value: function back() {\n      window.history.back();\n    }\n  }, {\n    key: 'push',\n    value: function push(url) {\n      var as = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : url;\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      return this.change('pushState', url, as, options);\n    }\n  }, {\n    key: 'replace',\n    value: function replace(url) {\n      var as = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : url;\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      return this.change('replaceState', url, as, options);\n    }\n  }, {\n    key: 'change',\n    value: function () {\n      var _ref4 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3(method, _url, _as, options) {\n        var url, as, _parse, pathname, query, route, _options$shallow, shallow, routeInfo, _routeInfo, error, hash;\n\n        return _regenerator2.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                // If url and as provided as an object representation,\n                // we'll format them into the string version here.\n                url = (typeof _url === 'undefined' ? 'undefined' : (0, _typeof3.default)(_url)) === 'object' ? (0, _url2.format)(_url) : _url;\n                as = (typeof _as === 'undefined' ? 'undefined' : (0, _typeof3.default)(_as)) === 'object' ? (0, _url2.format)(_as) : _as;\n\n\n                this.abortComponentLoad(as);\n                _parse = (0, _url2.parse)(url, true), pathname = _parse.pathname, query = _parse.query;\n\n                // If the url change is only related to a hash change\n                // We should not proceed. We should only replace the state.\n\n                if (!this.onlyAHashChange(as)) {\n                  _context3.next = 7;\n                  break;\n                }\n\n                this.changeState('replaceState', url, as);\n                return _context3.abrupt('return');\n\n              case 7:\n\n                // If asked to change the current URL we should reload the current page\n                // (not location.reload() but reload getInitalProps and other Next.js stuffs)\n                // We also need to set the method = replaceState always\n                // as this should not go into the history (That's how browsers work)\n                if (!this.urlIsNew(pathname, query)) {\n                  method = 'replaceState';\n                }\n\n                route = toRoute(pathname);\n                _options$shallow = options.shallow, shallow = _options$shallow === undefined ? false : _options$shallow;\n                routeInfo = null;\n\n\n                this.events.emit('routeChangeStart', as);\n\n                // If shallow === false and other conditions met, we reuse the\n                // existing routeInfo for this route.\n                // Because of this, getInitialProps would not run.\n\n                if (!(shallow && this.isShallowRoutingPossible(route))) {\n                  _context3.next = 16;\n                  break;\n                }\n\n                routeInfo = this.components[route];\n                _context3.next = 19;\n                break;\n\n              case 16:\n                _context3.next = 18;\n                return this.getRouteInfo(route, pathname, query, as);\n\n              case 18:\n                routeInfo = _context3.sent;\n\n              case 19:\n                _routeInfo = routeInfo, error = _routeInfo.error;\n\n                if (!(error && error.cancelled)) {\n                  _context3.next = 22;\n                  break;\n                }\n\n                return _context3.abrupt('return', false);\n\n              case 22:\n\n                this.events.emit('beforeHistoryChange', as);\n                this.changeState(method, url, as, options);\n                hash = window.location.hash.substring(1);\n\n\n                this.set(route, pathname, query, as, (0, _extends3.default)({}, routeInfo, { hash: hash }));\n\n                if (!error) {\n                  _context3.next = 29;\n                  break;\n                }\n\n                this.events.emit('routeChangeError', error, as);\n                throw error;\n\n              case 29:\n\n                this.events.emit('routeChangeComplete', as);\n                return _context3.abrupt('return', true);\n\n              case 31:\n              case 'end':\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function change(_x8, _x9, _x10, _x11) {\n        return _ref4.apply(this, arguments);\n      }\n\n      return change;\n    }()\n  }, {\n    key: 'changeState',\n    value: function changeState(method, url, as) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n      if (method !== 'pushState' || (0, _utils.getURL)() !== as) {\n        window.history[method]({ url: url, as: as, options: options }, null, as);\n      }\n    }\n  }, {\n    key: 'getRouteInfo',\n    value: function () {\n      var _ref5 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee4(route, pathname, query, as) {\n        var routeInfo, _routeInfo2, Component, err, jsonPageRes, ctx, _Component, _ctx;\n\n        return _regenerator2.default.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                routeInfo = null;\n                _context4.prev = 1;\n\n                routeInfo = this.components[route];\n\n                if (routeInfo) {\n                  _context4.next = 7;\n                  break;\n                }\n\n                _context4.next = 6;\n                return this.fetchComponent(route, as);\n\n              case 6:\n                routeInfo = _context4.sent;\n\n              case 7:\n                _routeInfo2 = routeInfo, Component = _routeInfo2.Component, err = _routeInfo2.err, jsonPageRes = _routeInfo2.jsonPageRes;\n                ctx = { err: err, pathname: pathname, query: query, jsonPageRes: jsonPageRes };\n                _context4.next = 11;\n                return this.getInitialProps(Component, ctx);\n\n              case 11:\n                routeInfo.props = _context4.sent;\n\n\n                this.components[route] = routeInfo;\n                _context4.next = 27;\n                break;\n\n              case 15:\n                _context4.prev = 15;\n                _context4.t0 = _context4['catch'](1);\n\n                if (!_context4.t0.cancelled) {\n                  _context4.next = 19;\n                  break;\n                }\n\n                return _context4.abrupt('return', { error: _context4.t0 });\n\n              case 19:\n                _Component = this.ErrorComponent;\n\n                routeInfo = { Component: _Component, err: _context4.t0 };\n                _ctx = { err: _context4.t0, pathname: pathname, query: query };\n                _context4.next = 24;\n                return this.getInitialProps(_Component, _ctx);\n\n              case 24:\n                routeInfo.props = _context4.sent;\n\n\n                routeInfo.error = _context4.t0;\n                console.error(_context4.t0);\n\n              case 27:\n                return _context4.abrupt('return', routeInfo);\n\n              case 28:\n              case 'end':\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[1, 15]]);\n      }));\n\n      function getRouteInfo(_x13, _x14, _x15, _x16) {\n        return _ref5.apply(this, arguments);\n      }\n\n      return getRouteInfo;\n    }()\n  }, {\n    key: 'set',\n    value: function set(route, pathname, query, as, data) {\n      this.route = route;\n      this.pathname = pathname;\n      this.query = query;\n      this.as = as;\n      this.notify(data);\n    }\n  }, {\n    key: 'onlyAHashChange',\n    value: function onlyAHashChange(as) {\n      if (!this.as) return false;\n\n      var _as$split = this.as.split('#'),\n          _as$split2 = (0, _slicedToArray3.default)(_as$split, 1),\n          oldUrlNoHash = _as$split2[0];\n\n      var _as$split3 = as.split('#'),\n          _as$split4 = (0, _slicedToArray3.default)(_as$split3, 2),\n          newUrlNoHash = _as$split4[0],\n          newHash = _as$split4[1];\n\n      // If the urls are change, there's more than a hash change\n\n\n      if (oldUrlNoHash !== newUrlNoHash) {\n        return false;\n      }\n\n      // If there's no hash in the new url, we can't consider it as a hash change\n      if (!newHash) {\n        return false;\n      }\n\n      // Now there's a hash in the new URL.\n      // We don't need to worry about the old hash.\n      return true;\n    }\n  }, {\n    key: 'urlIsNew',\n    value: function urlIsNew(pathname, query) {\n      return this.pathname !== pathname || !(0, _shallowEquals2.default)(query, this.query);\n    }\n  }, {\n    key: 'isShallowRoutingPossible',\n    value: function isShallowRoutingPossible(route) {\n      return (\n        // If there's cached routeInfo for the route.\n        Boolean(this.components[route]) &&\n        // If the route is already rendered on the screen.\n        this.route === route\n      );\n    }\n  }, {\n    key: 'prefetch',\n    value: function () {\n      var _ref6 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee5(url) {\n        var _this = this;\n\n        var _parse2, pathname, route;\n\n        return _regenerator2.default.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (!(process.env.NODE_ENV === 'development')) {\n                  _context5.next = 2;\n                  break;\n                }\n\n                return _context5.abrupt('return');\n\n              case 2:\n                _parse2 = (0, _url2.parse)(url), pathname = _parse2.pathname;\n                route = toRoute(pathname);\n                return _context5.abrupt('return', this.prefetchQueue.add(function () {\n                  return _this.fetchRoute(route);\n                }));\n\n              case 5:\n              case 'end':\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function prefetch(_x17) {\n        return _ref6.apply(this, arguments);\n      }\n\n      return prefetch;\n    }()\n  }, {\n    key: 'fetchComponent',\n    value: function () {\n      var _ref7 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee6(route, as) {\n        var cancelled, cancel, jsonPageRes, jsonData, error, newData, _error;\n\n        return _regenerator2.default.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                cancelled = false;\n\n                cancel = this.componentLoadCancel = function () {\n                  cancelled = true;\n                };\n\n                _context6.next = 4;\n                return this.fetchRoute(route);\n\n              case 4:\n                jsonPageRes = _context6.sent;\n                jsonData = void 0;\n                // We can call .json() only once for a response.\n                // That's why we need to keep a copy of data if we already parsed it.\n\n                if (!jsonPageRes.data) {\n                  _context6.next = 10;\n                  break;\n                }\n\n                jsonData = jsonPageRes.data;\n                _context6.next = 13;\n                break;\n\n              case 10:\n                _context6.next = 12;\n                return jsonPageRes.json();\n\n              case 12:\n                jsonData = jsonPageRes.data = _context6.sent;\n\n              case 13:\n                if (!jsonData.buildIdMismatch) {\n                  _context6.next = 18;\n                  break;\n                }\n\n                (0, _._notifyBuildIdMismatch)(as);\n\n                error = Error('Abort due to BUILD_ID mismatch');\n\n                error.cancelled = true;\n                throw error;\n\n              case 18:\n                _context6.t0 = _extends3.default;\n                _context6.t1 = {};\n                _context6.next = 22;\n                return loadComponent(jsonData);\n\n              case 22:\n                _context6.t2 = _context6.sent;\n                _context6.t3 = {\n                  jsonPageRes: jsonPageRes\n                };\n                newData = (0, _context6.t0)(_context6.t1, _context6.t2, _context6.t3);\n\n                if (!cancelled) {\n                  _context6.next = 29;\n                  break;\n                }\n\n                _error = new Error('Abort fetching component for route: \"' + route + '\"');\n\n                _error.cancelled = true;\n                throw _error;\n\n              case 29:\n\n                if (cancel === this.componentLoadCancel) {\n                  this.componentLoadCancel = null;\n                }\n\n                return _context6.abrupt('return', newData);\n\n              case 31:\n              case 'end':\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function fetchComponent(_x18, _x19) {\n        return _ref7.apply(this, arguments);\n      }\n\n      return fetchComponent;\n    }()\n  }, {\n    key: 'getInitialProps',\n    value: function () {\n      var _ref8 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee7(Component, ctx) {\n        var cancelled, cancel, props, err;\n        return _regenerator2.default.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                cancelled = false;\n\n                cancel = function cancel() {\n                  cancelled = true;\n                };\n\n                this.componentLoadCancel = cancel;\n\n                _context7.next = 5;\n                return (0, _utils.loadGetInitialProps)(Component, ctx);\n\n              case 5:\n                props = _context7.sent;\n\n\n                if (cancel === this.componentLoadCancel) {\n                  this.componentLoadCancel = null;\n                }\n\n                if (!cancelled) {\n                  _context7.next = 11;\n                  break;\n                }\n\n                err = new Error('Loading initial props cancelled');\n\n                err.cancelled = true;\n                throw err;\n\n              case 11:\n                return _context7.abrupt('return', props);\n\n              case 12:\n              case 'end':\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function getInitialProps(_x20, _x21) {\n        return _ref8.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }, {\n    key: 'fetchRoute',\n    value: function fetchRoute(route) {\n      var promise = this.fetchingRoutes[route];\n      if (!promise) {\n        promise = this.fetchingRoutes[route] = this.doFetchRoute(route);\n      }\n\n      return promise;\n    }\n  }, {\n    key: 'doFetchRoute',\n    value: function doFetchRoute(route) {\n      var buildId = window.__NEXT_DATA__.buildId;\n\n      var url = '/_next/' + encodeURIComponent(buildId) + '/pages' + route;\n\n      return (0, _unfetch2.default)(url, {\n        method: 'GET',\n        credentials: 'same-origin',\n        headers: { 'Accept': 'application/json' }\n      });\n    }\n  }, {\n    key: 'abortComponentLoad',\n    value: function abortComponentLoad(as) {\n      if (this.componentLoadCancel) {\n        this.events.emit('routeChangeError', new Error('Route Cancelled'), as);\n        this.componentLoadCancel();\n        this.componentLoadCancel = null;\n      }\n    }\n  }, {\n    key: 'notify',\n    value: function notify(data) {\n      this.subscriptions.forEach(function (fn) {\n        return fn(data);\n      });\n    }\n  }, {\n    key: 'subscribe',\n    value: function subscribe(fn) {\n      var _this2 = this;\n\n      this.subscriptions.add(fn);\n      return function () {\n        return _this2.subscriptions.delete(fn);\n      };\n    }\n  }]);\n  return Router;\n}();\n\nexports.default = Router;\n\n\nfunction toRoute(path) {\n  return path.replace(/\\/$/, '') || '/';\n}","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/dist/lib/eval-script.js":"\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = evalScript;\n/**\n * IMPORTANT: This module is compiled *without* `use strict`\n * so that when we `eval` a dependency below, we don't enforce\n * `use strict` implicitly.\n *\n * Otherwise, modules like `d3` get `eval`d and forced into\n * `use strict` where they don't work (at least in current versions)\n *\n * To see the compilation details, look at `flyfile.js` and the\n * usage of `babel-plugin-transform-remove-strict-mode`.\n */\n\nfunction evalScript(script) {\n  var module = { exports: {} };\n\n  eval(script); // eslint-disable-line no-eval\n  return module.exports;\n}","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/dist/lib/shallow-equals.js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = shallowEquals;\nfunction shallowEquals(a, b) {\n  for (var i in a) {\n    if (b[i] !== a[i]) return false;\n  }\n\n  for (var _i in b) {\n    if (b[_i] !== a[_i]) return false;\n  }\n\n  return true;\n}","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/dist/lib/p-queue.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _assign = require('babel-runtime/core-js/object/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// based on https://github.com/sindresorhus/p-queue (MIT)\n// modified for browser support\n\nvar Queue = function () {\n  function Queue() {\n    (0, _classCallCheck3.default)(this, Queue);\n\n    this._queue = [];\n  }\n\n  (0, _createClass3.default)(Queue, [{\n    key: 'enqueue',\n    value: function enqueue(run) {\n      this._queue.push(run);\n    }\n  }, {\n    key: 'dequeue',\n    value: function dequeue() {\n      return this._queue.shift();\n    }\n  }, {\n    key: 'size',\n    get: function get() {\n      return this._queue.length;\n    }\n  }]);\n  return Queue;\n}();\n\nvar PQueue = function () {\n  function PQueue(opts) {\n    (0, _classCallCheck3.default)(this, PQueue);\n\n    opts = (0, _assign2.default)({\n      concurrency: Infinity,\n      queueClass: Queue\n    }, opts);\n\n    if (opts.concurrency < 1) {\n      throw new TypeError('Expected `concurrency` to be a number from 1 and up');\n    }\n\n    this.queue = new opts.queueClass(); // eslint-disable-line new-cap\n    this._pendingCount = 0;\n    this._concurrency = opts.concurrency;\n    this._resolveEmpty = function () {};\n  }\n\n  (0, _createClass3.default)(PQueue, [{\n    key: '_next',\n    value: function _next() {\n      this._pendingCount--;\n\n      if (this.queue.size > 0) {\n        this.queue.dequeue()();\n      } else {\n        this._resolveEmpty();\n      }\n    }\n  }, {\n    key: 'add',\n    value: function add(fn, opts) {\n      var _this = this;\n\n      return new _promise2.default(function (resolve, reject) {\n        var run = function run() {\n          _this._pendingCount++;\n\n          fn().then(function (val) {\n            resolve(val);\n            _this._next();\n          }, function (err) {\n            reject(err);\n            _this._next();\n          });\n        };\n\n        if (_this._pendingCount < _this._concurrency) {\n          run();\n        } else {\n          _this.queue.enqueue(run, opts);\n        }\n      });\n    }\n  }, {\n    key: 'onEmpty',\n    value: function onEmpty() {\n      var _this2 = this;\n\n      return new _promise2.default(function (resolve) {\n        var existingResolve = _this2._resolveEmpty;\n        _this2._resolveEmpty = function () {\n          existingResolve();\n          resolve();\n        };\n      });\n    }\n  }, {\n    key: 'size',\n    get: function get() {\n      return this.queue.size;\n    }\n  }, {\n    key: 'pending',\n    get: function get() {\n      return this._pendingCount;\n    }\n  }]);\n  return PQueue;\n}();\n\nexports.default = PQueue;","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/dist/lib/utils.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loadGetInitialProps = undefined;\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _assign = require('babel-runtime/core-js/object/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar loadGetInitialProps = exports.loadGetInitialProps = function () {\n  var _ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(Component, ctx) {\n    var props, compName, message;\n    return _regenerator2.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (Component.getInitialProps) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt('return', {});\n\n          case 2:\n            _context.next = 4;\n            return Component.getInitialProps(ctx);\n\n          case 4:\n            props = _context.sent;\n\n            if (!(!props && (!ctx.res || !ctx.res.finished))) {\n              _context.next = 9;\n              break;\n            }\n\n            compName = Component.displayName || Component.name;\n            message = '\"' + compName + '.getInitialProps()\" should resolve to an object. But found \"' + props + '\" instead.';\n            throw new Error(message);\n\n          case 9:\n            return _context.abrupt('return', props);\n\n          case 10:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function loadGetInitialProps(_x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexports.warn = warn;\nexports.execOnce = execOnce;\nexports.deprecated = deprecated;\nexports.printAndExit = printAndExit;\nexports.getLocationOrigin = getLocationOrigin;\nexports.getURL = getURL;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction warn(message) {\n  if (process.env.NODE_ENV !== 'production') {\n    console.error(message);\n  }\n}\n\nfunction execOnce(fn) {\n  var _this = this;\n\n  var used = false;\n  return function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (!used) {\n      used = true;\n      fn.apply(_this, args);\n    }\n  };\n}\n\nfunction deprecated(fn, message) {\n  if (process.env.NODE_ENV === 'production') return fn;\n\n  var warned = false;\n  var newFn = function newFn() {\n    if (!warned) {\n      warned = true;\n      console.error(message);\n    }\n\n    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return fn.apply(this, args);\n  };\n\n  // copy all properties\n  (0, _assign2.default)(newFn, fn);\n\n  return newFn;\n}\n\nfunction printAndExit(message) {\n  var code = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n  if (code === 0) {\n    console.log(message);\n  } else {\n    console.error(message);\n  }\n\n  process.exit(code);\n}\n\nfunction getLocationOrigin() {\n  var _window$location = window.location,\n      protocol = _window$location.protocol,\n      hostname = _window$location.hostname,\n      port = _window$location.port;\n\n  return protocol + '//' + hostname + (port ? ':' + port : '');\n}\n\nfunction getURL() {\n  var href = window.location.href;\n\n  var origin = getLocationOrigin();\n  return href.substring(origin.length);\n}","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/prefetch.js":"module.exports = require('./dist/lib/prefetch')\n","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/dist/lib/prefetch.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nexports.prefetch = prefetch;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _link = require('./link');\n\nvar _link2 = _interopRequireDefault(_link);\n\nvar _router = require('./router');\n\nvar _router2 = _interopRequireDefault(_router);\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar warnImperativePrefetch = (0, _utils.execOnce)(function () {\n  var message = '> You are using deprecated \"next/prefetch\". It will be removed with Next.js 2.0.\\n' + '> Use \"Router.prefetch(href)\" instead.';\n  (0, _utils.warn)(message);\n});\n\nvar wantLinkPrefetch = (0, _utils.execOnce)(function () {\n  var message = '> You are using deprecated \"next/prefetch\". It will be removed with Next.js 2.0.\\n' + '> Use \"<Link prefetch />\" instead.';\n  (0, _utils.warn)(message);\n});\n\nfunction prefetch(href) {\n  warnImperativePrefetch();\n  return _router2.default.prefetch(href);\n}\n\nvar LinkPrefetch = function (_React$Component) {\n  (0, _inherits3.default)(LinkPrefetch, _React$Component);\n\n  function LinkPrefetch() {\n    (0, _classCallCheck3.default)(this, LinkPrefetch);\n    return (0, _possibleConstructorReturn3.default)(this, (LinkPrefetch.__proto__ || (0, _getPrototypeOf2.default)(LinkPrefetch)).apply(this, arguments));\n  }\n\n  (0, _createClass3.default)(LinkPrefetch, [{\n    key: 'render',\n    value: function render() {\n      wantLinkPrefetch();\n      var props = (0, _extends3.default)({}, this.props, {\n        prefetch: this.props.prefetch !== false\n      });\n\n      return _react2.default.createElement(_link2.default, props);\n    }\n  }]);\n  return LinkPrefetch;\n}(_react2.default.Component);\n\nexports.default = LinkPrefetch;","/home/travis/build/npmtest/node-npmtest-next/node_modules/next/router.js":"module.exports = require('./dist/lib/router')\n"}